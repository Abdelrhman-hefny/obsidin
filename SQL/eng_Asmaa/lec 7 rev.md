# ----- ุงูุฏูุงู ุงูุชุฌููุนูุฉ  (Aggregate Functions) -------


## 1) ูุง ูู ุงูุฏูุงู ุงูุชุฌููุนูุฉุ ูููุงุฐุง ูุณุชุฎุฏููุงุ

**ุงูุฏูุงู ุงูุชุฌููุนูุฉ** ุจุชุญุณุจ ูููุฉ ูุงุญุฏุฉ ุชูุฎูุต ูุฌููุนุฉ ุตููู.
ุจูุณุชุฎุฏููุง ููุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ: ุนุฏุฏ ุงูููุธูููุ ูุชูุณุท ุงูุฑูุงุชุจุ ุฃุนูู ุฑุงุชุจุ ุฃูู ุฑุงุชุจโฆ ุฅูุฎ.

ุฃุดูุฑูุง:

- `COUNT()`                    
- `SUM()`                 
- `AVG()`                   
- `MIN()`                          
- `MAX()`

**ููุฑุชูุง :**

> ูู ุนูุฏู ุฌุฏูู ูุจูุฑ ุงูุฏุงูุฉ  "ุจุชุฌูุน" ุจูุงูุงุช ูุชูุฑ ูุชุฏูู "ุฑูู ููุฎูุต" (ุฃู ุณุทุฑ ููุฎูุต ููู ูุฌููุนุฉ).

---
## 2) COUNT() โ ุงูุนุฏ

**ุงูุตูุบุฉ ุงูุฃุณุงุณูุฉ:**
```sql
-- ูุนุฏ ูู ุงูุตููู
SELECT COUNT(*)

-- ูุนุฏ ุงูุตููู ุงูุชู ุจูุง ูููุฉ ุบูุฑ NULL ูู ุงูุนููุฏ ุงููุญุฏุฏ
SELECT COUNT(ColName)

-- ูุนุฏ ุงูููู ุงูููููุฒุฉ ููุท (ููุบู ุงูุชูุฑุงุฑุงุช)
SELECT COUNT(DISTINCT ColName)
```

**ุฃูุซูุฉ :**
```sql
-- (MyCompany.Employee)
SELECT COUNT(*), COUNT(ssn), COUNT(dno)
FROM Employee;
```

- ุง `COUNT(*)`: ุฅุฌูุงูู ุนุฏุฏ ุงูููุธููู (ุญุชู ูู `ssn` ุฃู `dno` NULL).
- ุง `COUNT(ssn)`: ุนุฏุฏ ุงูููุธููู ุงูุฐูู ูุฏููู SSN ุบูุฑ NULL.
- ุง `COUNT(dno)`: ุนุฏุฏ ุงูููุธููู ุงูุฐูู ูุฏููู ุฑูู ูุณู ุบูุฑ NULL.

**ูุชู ุฃุณุชุฎุฏููุ** ููุนุฑูุฉ ุงูุญุฌู: ูุงู ููุธูุ ูุงู ูุงุชูุฑุฉุ ูุงู ุทูุจุ

---

## 3) SUM() ู AVG() โ ุงูุฌูุน ูุงููุชูุณุท

**SUM()** ูุฌูุน ููู ุฑูููุฉ.  
**AVG()** ูุญุณุจ ุงููุชูุณุท ุงูุญุณุงุจู ููููู ุบูุฑ NULL.

```sql
SELECT SUM(salary)       FROM Employee;       -- ุฅุฌูุงูู ุงูุฑูุงุชุจ
SELECT AVG(salary)       FROM Employee;       -- ูุชูุณุท ุงูุฑูุงุชุจ
SELECT SUM(salary) / COUNT(salary) FROM Employee; -- ุฒู AVG ููู ุงูุชุจู ูู NULL
```

> **ููุญูุธุฉ ูููุฉ:** ูู ูู ููู NULL ูู `salary`ุ ูู `AVG(salary)` = `SUM(salary)/COUNT(salary)` (ุงูุงุชููู ูุชุฌุงูููุง NULL).  
> **ููู ูู ุงุณุชุฎุฏูุช** `SUM(salary)/COUNT(*)` ูููู ูุทูุน ุฃุตุบุฑ ูู ุงูุญูููู ูุฃู `COUNT(*)` ุจูุนุฏ ุตููู ุญุชู ูู ุฑุงุชุจูุง NULL.

**ุฃุฎุทุงุก ุงูููุน:**

```sql
SELECT SUM(Fname) FROM Employee;
-- ุฎุทุฃ: nvarchar ูุง ูููุน ูุน SUM
```

**ุชูุงุฏู ุงููุณูุฉ ุงูุตุญูุญุฉ:**

```sql
SELECT CAST(SUM(salary) AS decimal(18,2)) / NULLIF(COUNT(salary),0)
FROM Employee;
-- CAST ูุถูุงู ูุณูุฑ ุนุดุฑูุฉุ ู NULLIF ูุชุฌููุจ ุงููุณูุฉ ุนูู ุตูุฑ ูู ูููุด ุฑูุงุชุจ
```

**DISTINCT ูุน SUM/AVG:**

```sql
SELECT SUM(DISTINCT salary) FROM Employee; -- ูุฌูุน ุงูููู ุงููุฎุชููุฉ ููุท
SELECT AVG(DISTINCT salary) FROM Employee; -- ูุชูุณุท ุงูููู ุงููุฎุชููุฉ ููุท
```

---

## 4) MIN() ู MAX() โ ุงูุตุบุฑู ูุงูุนุธูู

- ุชุนูู ูุน ุงูุฃุฑูุงู ูุงูุชูุงุฑูุฎ ูุงููุตูุต.
- ูุน **ุงููุตูุต**ุ ุงูููุงุฑูุฉ **ูุงููุณูุฉ/ุฃุจุฌุฏูุฉ** (Lexicographical).

- ูุซุงู:
```sql
SELECT MAX(Fname) AS [Max Fname], MIN(Fname) AS [Min Fname]
FROM Employee;
```

**ุงุณุชุฎุฏุงู ุดุงุฆุน:** ุฃุนูู/ุฃูู ุฑุงุชุจุ ุฃูุฏู/ุฃุญุฏุซ ุชุงุฑูุฎ ุชุนููู.

---

## 5) GROUP BY โ ุงูุชุฌููุน ุญุณุจ ุนููุฏ/ุฃูุซุฑ

```sql
SELECT Dno, MIN(salary) AS MinSalary, MAX(salary) AS MaxSalary
FROM Employee
GROUP BY Dno;  -- ุณุทุฑ ููู ูุณู
```

- ูู ูุณู (**Dno**) ููุทูุน ูู ุณุทุฑ ููู ุฃูู ูุฃุนูู ุฑุงุชุจ.
- ุฃู ุนููุฏ ุฎุงุฑุฌ ุฏูุงู ุงูุชุฌููุนูุฉ **ูุงุฒู** ูููู ูู `GROUP BY`.
    

**HAVING ูุซุงู:**

```sql
-- ุงูุฃูุณุงู ุงูุชู ูุชูุณุท ุฑุงุชุจูุง >= 10000
SELECT Dno, AVG(salary) AS AvgSalary
FROM Employee
GROUP BY Dno
HAVING AVG(salary) >= 10000;
```

**WHERE ูุจู ุงูุชุฌููุน:**

```sql
-- ุงุนุชุจุฑ ููุท ุงูููุธููู ุงูุฐูู ูุฏููู Dno ุบูุฑ NULL
SELECT Dno, COUNT(*) AS Cnt
FROM Employee
WHERE Dno IS NOT NULL
GROUP BY Dno;
```

---

## 7) ุง Window Functions ูุน OVER(PARTITION BY)

**ุงูููุฑุฉ:** ุชุฑุฌุน ูููุฉ ุชุฌููุนูุฉ **ููู ุตู** ุจุฏูู ูุง ุชูููู ุนุฏุฏ ุงูุตููู (ุนูุณ GROUP BY).

```sql

SELECT *, MIN(salary) OVER (PARTITION BY Dno) AS DeptMinSalary
FROM Employee;

-- ููุณ ุงููููุฉ ููู ุตู ูุงุญุฏ ููู ูุณู ุจุงุณุชุฎุฏุงู DISTINCT (ุฃู GROUP BY)
SELECT DISTINCT Dno, MIN(salary) OVER (PARTITION BY Dno) AS DeptMinSalary
FROM Employee;
```

**ูุชู ุฃุณุชุฎุฏููุงุ** ูู ุนุงูุฒ ูู ุตู ูุญุชูุธ ุจุชูุงุตููู + ุชุถูู ูู ุฅุญุตุงุฆูุฉ ุนูู ูุณุชูู ุงููุณู/ุงููุฌููุนุฉ.

> **ููุงุฑูุฉ ุณุฑูุนุฉ**

- `GROUP BY`: ููุฑุฌุน **ุณุทุฑ ูุงุญุฏ ููู ูุฌููุนุฉ**.
    
- `OVER(PARTITION BY)`: ููุฑุฌุน **ูููุฉ ููู ุตู** ุฏุงุฎู ูุฌููุนุชู.
    

---

## 8) ุฃูุซูุฉ ุนูููุฉ

### 8.1 

```sql
USE MyCompany;

-- 1) ุฅุญุตุงุฆูุงุช ุนุงูุฉ
SELECT COUNT(*) AS TotalRows,
       COUNT(ssn) AS WithSSN,
       COUNT(dno) AS WithDept
FROM Employee;

-- 2) ุฅุฌูุงูู ููุชูุณุท ุงูุฑูุงุชุจ
SELECT SUM(salary) AS TotalSalary,
       AVG(salary) AS AvgSalary
FROM Employee;

-- 3) ุฃุนูู/ุฃูู ุฑุงุชุจ ุนูู ูุณุชูู ุงูุดุฑูุฉ
SELECT MAX(salary) AS [Max salary],
       MIN(salary) AS [Min salary]
FROM Employee;

-- 4) ุฃุนูู/ุฃูู ุฑุงุชุจ ููู ูุณู
SELECT Dno,
       MIN(salary) AS MinSalary,
       MAX(salary) AS MaxSalary
FROM Employee
GROUP BY Dno;

-- 5) ุฃูู ุฑุงุชุจ ููู ููุธู ุญุณุจ ูุณูู (ุจุฏูู ุชูููู ุงูุตููู)
SELECT E.*, MIN(salary) OVER (PARTITION BY Dno) AS DeptMin
FROM Employee AS E;

-- 6) ุงููุฑู ุจูู AVG ู SUM/COUNT
SELECT AVG(salary) AS Avg1,
       CAST(SUM(salary) AS decimal(18,2))/NULLIF(COUNT(salary),0) AS Avg2
FROM Employee;
```

### 8.2 ูุซุงู ููุจูุงูุงุช 

|SSN|Fname|Dno|Salary|
|---|---|---|---|
|1|Ali|10|8000|
|2|Sara|10|10000|
|3|Omar|20|NULL|
|4|Mona|20|12000|

- `COUNT(*)` = 4
    
- `COUNT(salary)` = 3 (ูุฃู ูููุฉ ูุงุญุฏุฉ NULL)
    
- `SUM(salary)` = 8000 + 10000 + 12000 = 30000
    
- `AVG(salary)` = 30000 / 3 = 10000
    
- `MIN/MAX` ููู ูุณู:
    
    - ูุณู 10: Min=8000, Max=10000
        
    - ูุณู 20: Min=12000, Max=12000 (ูุฃู NULL ููุชุฌุงูููุฉ)
        

### 8.3 ูุต + MIN/MAX

```sql
SELECT MAX(Fname) AS MaxFname, MIN(Fname) AS MinFname
FROM Employee; -- ููุงุฑูุฉ ุฃุจุฌุฏูุฉ
```

---

## 11) ุชูุฑูู ุตุบูุฑ ๐ถ 

1. ูุงุช ุนุฏุฏ ุงูููุธููู ุงูููููุ ูุนุฏุฏ ูู ูุฏููู ุฑุงุชุจ ุบูุฑ NULLุ ูุนุฏุฏ ูู ูุฏููู ูุณู ุบูุฑ NULL.
2. ูุงุช ุฅุฌูุงูู ุงูุฑูุงุชุจ ููุชูุณุทูุง ููุดุฑูุฉ ููู.
3. ูุงุช ุฃุนูู/ุฃูู ุฑุงุชุจ ููู ูุณู.
4. ูุงุช ุงูุฃูุณุงู ุงูุชู ุนุฏุฏ ููุธูููุง โฅ 5.
5. ูุงุช ุงูููุธููู ูุน ุฅุถุงูุฉ ุนููุฏ ููุถุญ **ุฃูู ุฑุงุชุจ ูู ูุณู ูู ููุธู** (ุจุงุณุชุฎุฏุงู `OVER`).
6. ุงุญุณุจ **ูุชูุณุท ุงูุฑูุงุชุจ ุงูููููุฒุฉ ููุท** (ุจุงุณุชุฎุฏุงู `AVG(DISTINCT salary)`).


---


# ----- ุฏูุงู ุงูุชุนุงูู ูุน ุงูููู ุงููุงุฑุบุฉ - NULL Functions -----


### 1) ุงู NULL ูู ููุงุนุฏ ุงูุจูุงูุงุช

- ูุนูู: _"ูุง ุชูุฌุฏ ูููุฉ"_ ุฃู _"ุบูุฑ ูุนุฑูู"_ ุฃู _"ูุงุฑุบ"_.
- ูุฎุชูู ุนู ุงูููู ุงููุงุฑุบุฉ ูุซู `''` (ุณูุณูุฉ ูุตูุฉ ูุงุฑุบุฉ) ุฃู `0` (ุตูุฑ ุนุฏุฏู).
    

---

## 2) ููุงุฐุง ุงูุชุนุงูู ูุน NULL ูููุ

- NULL ูููู ูุบููุฑ ูุชุงุฆุฌ ุงูุงุณุชุนูุงูุงุช ุงูุญุณุงุจูุฉ.
    
- ุง NULL ูุง ูุณุงูู ุฃู ุดูุกุ ุญุชู NULL ุขุฎุฑ (ูุนูู `NULL = NULL` โ ุงููุชูุฌุฉ `UNKNOWN` ูููุณ TRUE).
- ูู ูุง ุชุนุงููุชุด ูุน NULLุ ูููู ุชุทูุน ูุชุงุฆุฌ ูุงูุตุฉ ุฃู ุบูุฑ ุฏูููุฉ.
    

ูุซุงู:

```sql
SELECT salary + 1000 FROM Employee;
-- if salary = NULL โ ุงููุชูุฌุฉ NULLุ ูุด ูุชุญุตู ุนูู 1000
```

---

## 3) ุงูุฏูุงู ุงูุฃุณุงุณูุฉ: ISNULL() ู COALESCE()

### 3.1 ISNULL()

**ุงูุตูุบุฉ:**
```sql
ISNULL(expression, replacement_value)
```

- ูู `expression` = NULL โ ุชุณุชุจุฏููุง ุจุงูู `replacement_value`.
- ูู ูุด NULL โ ุชุฑุฌุน ุงููููุฉ ุงูุฃุตููุฉ.
    

**ูุซุงู :**
```sql
SELECT ISNULL(Lname, 'Not found')
FROM Employee;
```

- ูู `Lname` = NULL โ ุชุธูุฑ `'Not found'`.
    
- ูู `Lname` ูููุง ูููุฉ โ ุชุธูุฑ ููุง ูู.
    

---

### 3.2 COALESCE()
ููุฑุชูุง: 
ุฏุงูุฉ ูู SQL ุจุชุฏูุฑ ุนูู **ุฃูู ูููุฉ ูุด NULL** ูู ูุงุฆูุฉ ูููุ ูุชุฑุฌุนูุง.  
ูู ูู ุงูููู NULLุ ูุชุฑุฌุน ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ุงููู ุงูุช ุญุงุทุทูุง ูู ุงูุขุฎุฑ.

- ุจูุญุท ุจุฏูู ุฃู ูููุฉ ุงุญุชูุงุทูุฉ ุชุธูุฑ ุจุฏู ุงููNULL ูููุณุชุฎุฏู.
- ุจุชุณูู ูุชุงุจุฉ ุงูููุฏ ุจุฏู ูุง ูุนูู `CASE` ุทููู.

**ุงูุตูุบุฉ:**

```sql
COALESCE(expr1, expr2, expr3, ..., default_value)
```

- ูุจุฏุฃ ูู ุงูุดูุงู โ ุฃูู ูููุฉ ูุด NULL ููุฑุฌุนูุง.
- ูู ูู ุงูููู NULL โ ูุฑุฌุน `default_value`.
    
**ูุซุงู :**

```sql
SELECT COALESCE(Lname, Address, Fname, 'Not found')
FROM Employee;
```

1. ุดูู `Lname` โ ูู ููุฌูุฏ ุงุฑุฌุนู.
2. ูู NULL โ ุฌุฑุจ `Address`.
3. ูู NULL โ ุฌุฑุจ `Fname`.
4. ูู NULL โ ุงุฑุฌุน `'Not found'`.
    

---

## 4) ุฏูุฌ ุงููุตูุต ูุน NULL

### 4.1 ISNULL ุฏุงุฎู ุงููุตูุต

```sql
SELECT Lname + ' ' + ISNULL(Fname, ' ')
FROM Employee;
```

- ูู `Fname` NULL โ ุชุญุท ูุณุงูุฉ ุจุฏููุง.
    

### 4.2 CONCAT() โ ุฃุณูู ููุชุนุงูู ูุน NULL

```sql
SELECT CONCAT(Lname, ' ', Fname)
FROM Employee;
```

- `CONCAT` ุชุนุชุจุฑ NULL = ุณูุณูุฉ ูุงุฑุบุฉ.
    

### 4.3 CONCAT_WS() โ ูุน ูุงุตู Separator

```sql
SELECT CONCAT_WS('-', Fname, Lname, Address, SSN)
FROM Employee;
```

- ูู ูููุฉ NULL โ ุชุชุฌุงูููุง ูุชุญุงูุธ ุนูู ุงููุงุตู.
    
- ูุซุงู: ูู Address = NULL โ ุงููุงุชุฌ ูููู ูููู: `Ali-Ahmed-12345` (ุจุฏูู ูุงุตู ูุฒุฏูุฌ).
    

---

## 5) ุงููุฑูู ุจูู ISNULL ู COALESCE

| ุงูุฎุงุตูุฉ                 | ISNULL        | COALESCE                  |
| ----------------------- | ------------- | ------------------------- |
| ุนุฏุฏ ุงููุนุงููุงุช           | 2 ููุท         | 2 ุฃู ุฃูุซุฑ                 |
| ูุนูุงุฑ ANSI SQL          | ูุง            | ูุนู                       |
| ุงูุชูุงูู ูุน ุฃููุงุน ูุฎุชููุฉ | ูุญุงูู ุงูุชุญููู | ูุฎุชุงุฑ ููุน ุงูุจูุงูุงุช ุงูุฃุนูู |
| ุงูุฃุฏุงุก                  | ุฃุณุฑุน ููููุงู   | ูุฑู ุฃูุซุฑ                  |

---

## 6) ุฃูุซูุฉ 

```sql
-- 1) ุงุณุชุจุฏุงู ุงูููู ุงููุงุฑุบุฉ ูู Lname ุจูููุฉ "Not found"
SELECT ISNULL(Lname, 'Not found')
FROM Employee;

-- 2) ุฃูู ูููุฉ ุบูุฑ NULL ูู Lname ุฃู Address ุฃู SSN
SELECT COALESCE(Lname, Address, SSN, 'Not found')
FROM Employee;

-- 3) ุฏูุฌ ุงูุงุณู ุงููุงูู ุญุชู ูู Fname ุฃู Lname NULL
SELECT CONCAT(Lname, ' ', Fname)
FROM Employee;

-- 4) ุฏูุฌ ุงูุจูุงูุงุช ูุน ูุงุตู - ูุชุฌุงูู ุงูููู NULL
SELECT CONCAT_WS('-', Fname, Lname, Address, SSN)
FROM Employee;
```

---


##  ุชูุฑูู ุตุบูุฑ ๐ถ 

1. ุงุณุชุจุฏู `Address` ุงููุงุฑุบ ุจูููุฉ `'Unknown'`.
2. ุงูุชุจ ุงุณุชุนูุงู ูุฑุฌุน ุฃูู ูููุฉ ุบูุฑ NULL ูู `Email` ุฃู `Phone` ุฃู ูููุฉ `'No Contact'`.
3. ุงุฏูุฌ `Fname` ู `Lname` ูู ุนููุฏ ูุงุญุฏ ุญุชู ูู ุฅุญุฏุงููุง NULL.
4. ุฌุฑูุจ ุงููุฑู ุจูู `ISNULL` ู `COALESCE` ุฅุฐุง ุฃุนุทูุช ุฃููุงุน ุจูุงูุงุช ูุฎุชููุฉ.
    

---

# -------ุฏูุงู ุงูุชุงุฑูุฎ ูุงูููุช Date & Time Functions ----

1 ูุณุฎุฏููุง ูู: - ุชูุงุฑูุฑ ููููุฉ/ุดูุฑูุฉุ ุญุณุงุจ ูุฏุฏุ ุงุณุชุฎุฑุงุฌ ุงูููู/ุงูุดูุฑ/ุงูุณูุฉุ ููุนุงูุฌุฉ ููุงุนูุฏ (Deadlines).
    

### 2 ุฌูุจ ุงูุชุงุฑูุฎ/ุงูููุช ุงูุญุงูู

```sql
SELECT SYSDATETIME();      -- ุฏูุฉ ุนุงููุฉ (datetime2) ุจุงูุชูููุช ุงููุญูู ููุณูุฑูุฑ
SELECT SYSUTCDATETIME();   -- ููุณ ุงูุฏูุฉ ููู ุจุชูููุช UTC
SELECT GETDATE();          -- ุชุงุฑูุฎ/ููุช ูุญูู (datetime)
SELECT GETUTCDATE();       -- ุชุงุฑูุฎ/ููุช UTC (datetime)
```


- ูู ูุญุชุงุฌ ุฏูุฉ ูุงูู ุซุงููุฉ ุชูุฑูุจูุง โ `SYSDATETIME()` / `SYSUTCDATETIME()`.
- ูู ูุงูู ุซูุงูู/ูููู ุซุงููุฉ โ `GETDATE()` / `GETUTCDATE()`.
- ูู ุจุชุณุฌูู ุฃุญุฏุงุซ ุนุงูููุฉ (Logs) ุงูุฃูุถู ุชุฎุฒู UTC ูุชุฌููุจ ูุดุงูู ุงูููุงุทู ุงูุฒูููุฉ.

---

### 3.3 ุงุณุชุฎุฑุงุฌ ุฃุฌุฒุงุก ูู ุงูุชุงุฑูุฎ

```sql
SELECT DATENAME(day, GETDATE()); -- ุงุณู ุงูุฌุฒุก ููุต (ูุซูุงู "14")
SELECT DAY('2024-11-14');        -- 14
SELECT MONTH('2024-11-14');      -- 11
SELECT YEAR('2024-11-14');       -- 2024
```

> **ููุญูุธุฉ:** ุงุณุชุฎุฏู ุตูุบุฉ ุชุงุฑูุฎ ุขููุฉ ูุบูุฑ ููุชุจุณุฉ ูุซู `YYYY-MM-DD` ุฃู ุงูุฃูุถู `YYYYMMDD`.

---

### 3.4 ุงููุฑู ุจูู ุชุงุฑูุฎูู: `DATEDIFF`

```sql
-- ูุงู ููู ูู ุงูููุงุฑุฏุฉ ูุบุงูุฉ 10-10-2025 (ุงูุชุจู ููุตูุบุฉ)
SELECT DATEDIFF(day, GETDATE(), '2025-10-10');
```

- `DATEDIFF` ูุญุณุจ **ุนุฏุฏ ุญุฏูุฏ ุงููุญุฏุงุช** ุงูุชู ุชู ุชุฌุงูุฒูุง (Days/Months/Years). ูู ุงูุบุงูุจ ุฏู ูุณุงูู ุงููุฑู ุงููุนูู ูู ุงูุฃูุงู ุนูุฏูุง ุชุชุนุงูู ูุน ุชูุงุฑูุฎ ุจุฏูู ุณุงุนุงุช.
    

---

### 3.5 ููุงูุฉ ุงูุดูุฑ: `EOMONTH`

```sql
SELECT EOMONTH('2024-11-14'); -- 2024-11-30
SELECT EOMONTH('1950-02-14'); -- 1950-02-28
SELECT EOMONTH('2018-02-14'); -- 2018-02-28
SELECT EOMONTH('2019-02-14'); -- 2019-02-28
SELECT EOMONTH('2020-02-14'); -- 2020-02-29 (ุณูุฉ ูุจูุณุฉ)
SELECT EOMONTH('2021-02-14'); -- 2021-02-28
```

**ูุงูุฏุฉ ูููุฉ:** ุจุชุญุฏุฏ ุขุฎุฑ ููู ูู ุงูุดูุฑ ุจุณูููุฉ (ููุชูุงุฑูุฑ ุงูุดูุฑูุฉุ ุฅููุงู ุงูุญุณุงุจุงุชุ ุฅูุฎ).

---

### 3.6 ุงูุชุญูู ูู ุตูุงุญูุฉ ุงูุชุงุฑูุฎ: `ISDATE`

```sql
SELECT ISDATE('2021-02-14'); -- 1 ูู ุชุงุฑูุฎ ุตุงูุญุ 0 ูู ุบูุฑ ุตุงูุญ
SELECT ISDATE('Minya');      -- 0
```

> **ููุงุญุธุฉ:** `ISDATE` ูููู ูุชุฃุซุฑ ุจุฅุนุฏุงุฏุงุช ุงููุบุฉ/ุงูุชูุณูู. ุงูุจุฏูู ุงูุฃุญุฏุซ ูุงูุฃุฏู ุบุงูุจูุง ูู `TRY_CONVERT(date, ... )` ุฃู `TRY_CAST(... AS date)` (ุชุดูููุง ูู ูุตู ุงูุชุญููู).

---

### 3.7 ุตูุบ ุงูุชุงุฑูุฎ ูุฃูุถู ุงูููุงุฑุณุงุช

- **ุชุฌููุจ** ุชูุงุฑูุฎ ุจุตูุบุฉ ููุชุจุณุฉ ุฒู `'10-11-2025'` (ุฏู ููู 10 ููุง ุดูุฑ 10ุ).
- ุงุณุชุฎุฏู **`YYYYMMDD`** (ูุซุงู: `20251011`) ุฃู **`YYYY-MM-DD`** ูุชูููู ุงููุจุณ.
- ุนูุฏ ุงูุนุฑุถ ูููุณุชุฎุฏูููุ ุงุณุชุฎุฏู `FORMAT` ุฃู `CONVERT` ุจู **Style** ููุงุณุจ.
    

---

### 3.8 ุฃูุซูุฉ ุนูููุฉ 

```sql
SELECT SYSDATETIME();       -- 2025-08-14 12:30:41.3592251 (ูุซุงู)
SELECT SYSUTCDATETIME();    -- 2025-08-14 19:31:12.1258336
SELECT GETDATE();           -- 2025-08-14 12:33:10.760
SELECT GETUTCDATE();        -- 2025-08-14 19:33:41.627

SELECT DATENAME(day, GETDATE());             -- ูุซูุงู 14
SELECT DATEDIFF(day, GETDATE(), '2025-10-10');

SELECT DAY('2024-11-14');  -- 14
SELECT MONTH('2024-11-14');-- 11
SELECT YEAR('2024-11-14'); -- 2024

SELECT EOMONTH('2024-11-14');
```

---

### 3.9 ุฃุฎุทุงุก ุดุงุฆุนุฉ ููุตุงุฆุญ

1. ุฅุฏุฎุงู ุชุงุฑูุฎ ุจุตูุบุฉ ููุชุจุณุฉ โ ูุชุงุฆุฌ ุบูุฑ ูุชููุนุฉ. ุงุณุชุฎุฏู `YYYYMMDD`.
2. ุงูุฎูุท ุจูู **ุงูุชุฎุฒูู** ู**ุงูุนุฑุถ**: ุฎุฒูู ูู `date/datetime2`ุ ููุณูู ุนูุฏ ุงูุนุฑุถ ููุท.
3. ุชุฌุงูู ุงูููุทูุฉ ุงูุฒูููุฉ: ุณุฌูู UTC ูู ุงูุณูุณุชู ูุชุนุฏุฏ ุงูููุงุทู.

---

## # -------- ุฏูุงู ุงูุชุญููู โ Conversion Functions --------------

### **ุฃูููุง: ููู ุจูุญููู ุฃููุงุน ุงูุจูุงูุงุชุ**
ูู SQL Serverุ ุงูุจูุงูุงุช ูููู ุชูุฌู ุจุฃุดูุงู ูุฎุชููุฉ:
* ูุต (string)
* ุฃุฑูุงู (int, decimal)
* ุชูุงุฑูุฎ (date, datetime)
* ุนููุงุช (money)

ููู ุฃุญูุงููุง ุจูุญุชุงุฌ ูุบูุฑ ุงูููุน ุนูุดุงู:
1. **ูุนุฑุถูุง ุจุดูู ูุนููู** (ูุซูุงู ุงูุชุงุฑูุฎ ุจุตูุบุฉ 14/08/2025 ุจุฏู 2025-08-14).
2. **ูุฌูุน ุจูู ุฃููุงุน ูุฎุชููุฉ** (ูุซูุงู ูุถู ุงูุงุณู + ุงูุฑุงุชุจ ูู ูุต ูุงุญุฏ).
3. **ูุญููู ุงููุต ูุฑูู ุฃู ุชุงุฑูุฎ** ูุจู ูุนูู ุนููู ุนูููุงุช ุญุณุงุจูุฉ ุฃู ููุงุฑูุฉ.


---

### 1๏ธโฃ **CAST**

ุงูุตูุบุฉ:
```sql
CAST(ุงููููุฉ AS ุงูููุน)
```

* ุทุฑููุฉ ููุงุณูุฉ (standard) ููุฌูุฏุฉ ูู SQL ูุฃูุธูุฉ ุฃุฎุฑู.
* ุณููุฉ ูุจุณูุทุฉ.
* ููููุงุด ุงุฎุชูุงุฑ style ููุชูุงุฑูุฎ.

ูุซุงู:
```sql
SELECT CAST(123.45 AS int); -- ุงููุชูุฌุฉ: 123
```

---

### 2๏ธโฃ **CONVERT**

ุงูุตูุบุฉ:
```MYsql
CONVERT(ุงูููุน, ุงููููุฉ [, style])
```

* ุฎุงุตุฉ ุจู SQL Server.
* ุชูุฏุฑ ุชุญุฏุฏ **style** ูุชูุณูู ุงูุชุงุฑูุฎ ุฃู ุงูุนููุฉ.

ูุซุงู:
```sql
DECLARE @Today datetime = GETDATE();
SELECT CONVERT(varchar, @Today, 103); -- 14/08/2025
```

๐ก **ุงูุฎูุงุตุฉ**:

* ูู ุนุงูุฒ ุชุญููู ุจุณูุท โ ุงุณุชุฎุฏู CAST.
* ูู ูุญุชุงุฌ ุชุชุญูู ูู ุดูู ุงูุชุงุฑูุฎ/ุงูุฑูู โ ุงุณุชุฎุฏู CONVERT.
>ุงู** `FORMAT` (ุงููุจูู ุนูู .NET) ุฃููู ููู ุฃุจุทุฃ ูู `CONVERT`/`CAST`โูู ุงูุชูุงุฑูุฑ ุงููุจูุฑุฉ ุงุณุชุฎุฏู `CONVERT`.

---
### 4.3 ุฃููุงุท/Styles ุดุงุฆุนุฉ ููุชูุงุฑูุฎ ูุงูุงูุซุฑ ุงุณุชุฎุฏุงูุง

- **101**: `mm/dd/yyyy`
- **103**: `dd/mm/yyyy`
- **104**: `dd.mm.yyyy`
- **105**: `dd-mm-yyyy`
- **106**: `dd Mon yyyy`
- **126**: `yyyy-mm-ddThh:mi:ss` (ISO 8601 โ ูููุฏ ููุชุจุงุฏู)
- **130/131**: ุชูุณููุงุช ูุฌุฑู ุนุฑุจูุฉ

---

## **TRY\_CAST ู TRY\_CONVERT**

* ููุณ ููุฑุฉ CAST ู CONVERT ููู:
* **ูู ุงูุชุญููู ูุดูุ ูุฑุฌุน NULL ุจุฏู ูุง ูุฑูู Error.**

ูุซุงู:
```sql

SELECT TRY_CAST('Ali' AS int); -- NULL (ูุฃู ุงููุต ูุด ุฑูู)

SELECT TRY_CONVERT(date, '14/08/2025', 103); -- ูุญูููุง ูุชุงุฑูุฎ

```

๐ก ููู ููุง ุชุชุนุงูู ูุน ุจูุงูุงุช ุฌุงูุฉ ูู ูุณุชุฎุฏู ุฃู ูููุงุช ุฎุงุฑุฌูุฉ.

---

## **PARSE ู TRY\_PARSE**

* ุฃููู ูู ูุฑุงุกุฉ ุงููุตูุต ุจุตูุบ ูุฎุชููุฉ ูุน ุชุญุฏูุฏ ุงูุซูุงูุฉ (Culture) ูุซู en-US ุฃู fr-FR.
* ุฃุจุทุฃ ูู CAST/CONVERT.
* ูููุฏ ูู ุนูุฏู ูุตูุต ุฌุงูุฉ ูู ุฏูู ูุฎุชููุฉ.

ูุซุงู:
```sql
SELECT PARSE('Thursday, 14 November 2024' AS date USING 'en-US');
SELECT PARSE('$300.89' AS money USING 'en-US');
SELECT TRY_PARSE('Ali' AS money USING 'en-US'); -- NULL
```

---

## **ุฃูุซูุฉ ุนูููุฉ**

```sql
-- ุฏูุฌ ุงูุงุณู + ุงูุฑุงุชุจ ููุต ูุงุญุฏ
SELECT Fname + '_' + ISNULL(CONVERT(varchar(20), salary), ' ')
FROM Employee;

-- ุนุฑุถ ุงูุชุงุฑูุฎ ุจุฃูุซุฑ ูู ุดูู
DECLARE @Today datetime = GETDATE();
SELECT CONVERT(varchar, @Today, 101); -- 08/14/2025
SELECT CONVERT(varchar, @Today, 103); -- 14/08/2025
SELECT CONVERT(varchar, @Today, 105); -- 14-08-2025

-- ุงูุชุญููู ุงูุขูู
SELECT TRY_CAST('2025-08-14' AS date); -- ุชุงุฑูุฎ ุตุญูุญ
SELECT TRY_CAST('14/08/2025' AS date); -- NULL ุญุณุจ ุงูุฅุนุฏุงุฏุงุช
```
---

## **ุฃุฎุทุงุก ุดุงุฆุนุฉ**

1. **ูุณูุงู ุชุญุฏูุฏ style ููุชูุงุฑูุฎ** โ ูููู ูุนุฑุถูุง ุจุตูุบุฉ ุบูุฑ ูุชููุนุฉ.
2. **ุงุณุชุฎุฏุงู PARSE ูู ูู ุญุงุฌุฉ** โ ูู ุฃุจุทุฃุ ุงุณุชุฎุฏููุง ุจุณ ููุช ุงูุญุงุฌุฉ.
3. **ุนุฏู ุงุณุชุฎุฏุงู TRY\_* ูู ุงูุจูุงูุงุช ุบูุฑ ุงููุถูููุฉ*\* โ ูููู ุงูุงุณุชุนูุงู ููู ุจุณุจุจ ุฎุทุฃ ุชุญููู.
4. **ุงุณุชุฎุฏุงู FORMAT ูู ุชูุงุฑูุฑ ุถุฎูุฉ** โ ุจุทูุก ุฌุฏูุง ููุงุฑูุฉ ุจู CONVERT.


---
## ุชูุฑูู ุตุบูุฑ ๐ถ 

1. ุงุญุณุจ ุนุฏุฏ ุงูุฃูุงู ุงููุชุจููุฉ ุญุชู ููุงูุฉ ุงูุดูุฑ ุงูุญุงูู ุจุงุณุชุฎุฏุงู `EOMONTH` + `DATEDIFF`.
2. ุฎุฒูู ุงูุชุงุฑูุฎ ูู `date` ุซู ุงุนุฑุถู ุจุตูุบ: 101 ู103 ู106.
3. ุญููู ุงูุณูุณูุฉ `'14/08/2025'` ุฅูู `date` ุจุฃูุงู (ุจุฏูู ุฃุฎุทุงุก) ูููุง ูุงูุช ุงููุบุฉ.
4. ุญููู ูุต ูุจูุบ `'300,89'` ุฅูู `money` ูุฑูุฉ ุจุงูุซูุงูุฉ ุงููุฑูุณูุฉ ูุฃุฎุฑู ุจุงูุฅูุฌููุฒูุฉโูุงุดุฑุญ ุงููุฑู.


---

# ---------- ุฏูุงู ุงููุตูุต  (String Functions) ------

## 1) ููุงุฐุง ูุณุชุฎุฏู ุฏูุงู ุงููุตูุตุ

- ุชุฌููุฒ ุนุฑุถ ุงูุจูุงูุงุช ูู ุงูุชูุงุฑูุฑ (ุงุณู ูุงููุ ุฑูู ุจู ููุงุตูุ ุชุงุฑูุฎ ููุณููโฆ).
- ุชูุธูู ูุชุฌููุฒ ุงูุจูุงูุงุช ูุจู ุงูููุงุฑูุฉ ุฃู ุงูุจุญุซ.
- ุชุญููู ูุฎุฑุฌุงุช ุฑูููุฉ/ุชุงุฑูุฎูุฉ ุฅูู ูุตูุต ูููููุฉ ูููุณุชุฎุฏู ุงูููุงุฆู.

---

## 2) ---- ุฏูุฌ ุงููุตูุต: ` (+) `  `CONCAT` vs `CONCAT_WS` VS ---

### 2.1 ุนุงูู ุงูุฌูุน ุงููุตูู( `+` )

```sql
SELECT Lname + ' ' + ISNULL(Fname, ' ') AS FullName
FROM Employee;
```

- **ุงููุดููุฉ:** ูู ุฃู ุฌุฒุก `NULL` ุงููุชูุฌุฉ ูููุง **NULL**. ูุฐูู ุงุณุชุฎุฏู `ISNULL` ูุชูุงุฏูู.
    

### 2.2 ุง`CONCAT()` โ ุงูุฃุณูู ูุงูุฃูุซุฑ ุฃูุงููุง ูุน NULL

```sql
SELECT CONCAT(Lname, ' ', Fname) AS FullName
FROM Employee;
```

- ูุนุงูู `NULL` ูุณูุณูุฉ ูุงุฑุบุฉ "" (ูุง ููุณูุท ุงููุชูุฌุฉ).
    

### 2.3 ุง `CONCAT_WS(sep, ...)` โ ุฏูุฌ ูุน ูุงุตู ุซุงุจุช

```sql
SELECT CONCAT_WS('-', Fname, Lname, Address, SSN) AS ContactLine
FROM Employee;
```

- ุง **WS = With Separator** (ุจูุงุตู ุซุงุจุช).
    - ุจูุชุฌุงูู ุงูููู ุงููุงุถูุฉ ุฃู `NULL` ููุง ูุญุทุด ููุงุตู ุฒูุงุฏุฉ.

>๐ **ูุชู ุชุณุชุฎุฏู ุฅููุ**
- ุนูุฏู ุงุญุชูุงู ูุฌูุฏ NULL โ ุงุณุชุฎุฏู `CONCAT` ุฃู `CONCAT_WS`.
- ุนุงูุฒ ุชุญูู ูุฏูู โ ุงุณุชุฎุฏู `+` ูุน `ISNULL`.

---

## 3) ุชุบููุฑ ุญุงูุฉ ุงูุญุฑูู: `LOWER` / `UPPER`

```sql
SELECT LOWER(Fname) AS FirstLower, UPPER(Lname) AS LastUpper
FROM Employee;
```

- ูููุฏ ูุชูุญูุฏ ุงูุฅุฏุฎุงู ูุจู ุงูููุงุฑูุฉ/ุงููุฑุฒ.
    

> **ููุงุญุธุฉ Collation:** ุงูููุงุฑูุฉ ูุฏ ุชููู ุญุณุงุณุฉ ูุญุงูุฉ ุงูุญุฑูู ุฃู ูุง ุญุณุจ **Collation** ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููู `LOWER/UPPER` ุฏุงุฆููุง ุชุบููุฑ ุงูุดูู ุงููุนุฑูุถ.

---

## 4) ุทูู ุงููุต: `LEN`

```sql
SELECT LEN(Lname) AS NameLength
FROM Employee;
```

- ุจูุนุทูู ุนุฏุฏ ุงูุญุฑูู.
- **ููู:** ูุง ุจูุญุณุจุด ุงููุณุงูุงุช ูู ุขุฎุฑ ุงููุต. ูู ููู ุชุญุณุจูุงุ ุงุณุชุฎุฏู `DATALENGTH`.

---

## 5) ุงุณุชุฎุฑุงุฌ ุฌุฒุก ูู ุงููุต: `SUBSTRING`

- **SUBSTRING(ุงููุต, ุงูุจุฏุงูุฉ, ุงูุทูู)**
```sql
SELECT Lname,
       SUBSTRING(Lname, 2, 3) AS Mid3
FROM Employee;
```

- ูุจุฏุฃ ุงูุนุฏ ูู **1** (ูููุณ 0).
- ุงููุซุงู ูุณุชุฎุฑุฌ 3 ุญุฑูู ุงุจุชุฏุงุกู ูู ุงูุญุฑู ุงูุซุงูู.

---

## 6) ุชูุณูู ุงูุนุฑุถ: `FORMAT`

### 6.1 ุฃุฑูุงู

```sql
SELECT FORMAT(Salary, '###,###') AS SalaryWithCommas
FROM Employee;

SELECT FORMAT(764245354523, '###,###') AS BigNumber; --> 764,245,354,523
```

- ูุนุฑุถ ููุงุตู ุงูุขูุงู ุจุณูููุฉ.
    

### 6.2 ุชูุงุฑูุฎ

```sql
DECLARE @today date = GETDATE();
SELECT FORMAT(@today, 'd', 'en-US');  -- 8/14/2025
SELECT FORMAT(@today, 'd', 'ar-sa');  -- 20/02/47 (ูุฌุฑู)
SELECT FORMAT(@today, 'D', 'en-US');  -- Thursday, August 14, 2025
SELECT FORMAT(@today, 'D', 'ar-sa');  -- 20/ุตูุฑ/1447

SELECT FORMAT(@today, 'dd MM yy');            -- 14 08 25
SELECT FORMAT(@today, 'ddd MMM yyy');         -- Thu Aug 2025
SELECT FORMAT(@today, 'dddd MMMM yyyy');      -- Thursday August 2025
SELECT FORMAT(@today, 'dddd MMMM yyyy hh:mm:ss tt', 'en-US');
SELECT FORMAT(@today, 'dddd MMMM yyyy hh:mm:ss tt', 'ar-sa');
```

> **ุชูุจูู ุฃุฏุงุก:** `FORMAT` ุฃููู ููู ุฃุจุทุฃ ูู `CONVERT`. ุงุณุชุฎุฏูู ููุนุฑุถ ุงูููุงุฆูุ ูููุณ ุฏุงุฎู ุงุณุชุนูุงูุงุช ุถุฎูุฉ ุซูููุฉ.

---

## 7) ูุซุงู ุดุงูู 

```sql
-- ุฏูุฌ ุงุณู ุงูุนุงุฆูุฉ ูุน ุงูุงุณู ุงูุฃูู ูุน ูุนุงูุฌุฉ NULL
SELECT Lname + ' ' + ISNULL(Fname, ' ') AS FullName
FROM Employee;

-- ููุณ ุงูููุฑุฉ ููู ุจุฃุณูููุฉ ุฃุนูู ูุน NULL
SELECT CONCAT(Lname, ' ', Fname) AS FullName
FROM Employee;

-- ุฏูุฌ ุจููุงุณู ุซุงุจุชุฉ ูุน ุชุฌุงูู NULL
SELECT CONCAT_WS('-', Fname, Lname, Address, SSN) AS Line
FROM Employee;

-- ุชุบููุฑ ุญุงูุฉ ุงูุญุฑูู ูุทูู ุงูุงุณู
SELECT LOWER(Fname) AS FLower, UPPER(Lname) AS LUpper, LEN(Lname) AS LLen
FROM Employee;

-- ุฌุฒุก ูู ุงูุงุณู
SELECT Lname, SUBSTRING(Lname, 2, 3) AS Mid3
FROM Employee;

-- ุชูุณูู ุงูุฃุฑูุงู ูุงูุชูุงุฑูุฎ
SELECT FORMAT(Salary, '###,###') AS SalaryWithCommas FROM Employee;
DECLARE @t date = GETDATE();
SELECT FORMAT(@t, 'D', 'en-US') AS UsLong, FORMAT(@t, 'D', 'ar-sa') AS ArLong;
```

---

**ุชูุฑูู ุตุบูุฑ ๐ถ :**

1. ูููู ุนููุฏ `FullName` ูุฏูุฌ `Fname` ู`Lname` ุจุฃูุงู ูู ูู `NULL`.
2. ุฃูุดุฆ `UserLine` ุจุตูุบุฉ: `Fname-Lname-SSN` ูุน ุชุฌุงูู ุฃู ูููุฉ NULL ุชููุงุฆููุง.
3. ุงุณุชุฎุฑุฌ ุฃูู 2 ุญุฑู ูุขุฎุฑ 2 ุญุฑู ูู `Lname` (ุชูููุญ: `SUBSTRING` ู `LEN`).
4. ุงุนุฑุถ `Salary` ุจููุงุตู ุขูุงูุ ุซู ุฌุฑูุจ ููุณ ุงูููุฑุฉ ุจู `CONVERT` ูููุงุฑูุฉ ุงูุฃุฏุงุก.

---


# ----------------------- GROUP BY (ุงูุชุฌููุน) ------------


## 1) ุงูููุฑุฉ ุจุจุณุงุทุฉ

`GROUP BY` ูู SQL ุจุชุฎููู ูุงุนุฏุฉ ุงูุจูุงูุงุช **ุชุฌูุน ุงูุตููู ุงููู ูููุง ููุณ ุงููููุฉ ูู ุนููุฏ ูุนููู ุฃู ุฃูุชุฑ**ุ ูุจุนุฏูุง ููุฏุฑ ูุณุชุฎุฏู ุฏูุงู ุชุฌููุนูุฉ ุฒู:

* **COUNT** โ ุนุฏุฏ ุงูุตููู
* **SUM** โ ูุฌููุน ุงูููู
* **AVG** โ ูุชูุณุท ุงูููู
* **MIN** โ ุฃูู ูููุฉ
* **MAX** โ ุฃูุจุฑ ูููุฉ

๐ก **ูุซุงู :**

ุชุฎูู ุนูุฏู ููู ููู ุจูุงูุงุช ููุธููู. ูู ุนุงูุฒ ุชุนุฑู **ุฅุฌูุงูู ุงููุฑุชุจุงุช ูู ูู ูุณู**ุ ูุชุฌููุน ุงูููุธููู ุญุณุจ ุฑูู ุงููุณู (`GROUP BY Dno`) ูุจุนุฏูู ุชุญุณุจ ุงููุฌููุน.

## 2) ุฅูุชู ุจุณุชุฎุฏููุงุ

* ุนุฏุฏ ุงูุทูุงุจ ูู ูู ูุณู.
* ุฃูุจุฑ ูุฃุตุบุฑ ุฑุงุชุจ ูู ูู ูุฑุน.
* ูุชูุณุท ุงููุจูุนุงุช ููู ุดูุฑ.
* ุนุฏุฏ ุงูุทูุจุงุช ููู ุนููู.

## 3) ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ

1. ุฃู ุนููุฏ ูู `SELECT` ูุด ุฏุงุฎู ุฏุงูุฉ ุชุฌููุนูุฉ **ูุงุฒู** ูููู ูู `GROUP BY`.
2. ุงูุชุฑุชูุจ ูู `GROUP BY` ูุด ุจูุฃุซุฑ ุนูู ุงูุญุณุงุจุ ุจุณ ูููู ูุบููุฑ ุชุฑุชูุจ ุงูุนุฑุถ.
3. ุง **WHERE** ุจูุตููู ุงูุตููู ูุจู ุงูุชุฌููุนุ ู **HAVING** ุจูุตููู ุงููุฌููุนุงุช ุจุนุฏ ุงูุชุฌููุน.
4. ุงููุงุชุฌ ูู `GROUP BY` ุจูููู **ุณุทุฑ ูุงุญุฏ ููู ูุฌููุนุฉ**.

---

## 4) ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุฃูู ูุฃุนูู ุฑุงุชุจ ููู ูุณู

```sql
SELECT Dno, MIN(salary) AS MinSalary, MAX(salary) AS MaxSalary
FROM Employee
GROUP BY Dno;
```

> ุงููุงุชุฌ: ุณุทุฑ ูุงุญุฏ ููู `Dno` ููู ุฃูู ูุฃุนูู ุฑุงุชุจ ูู ุงููุณู.

### ูุซุงู 2: ุนุฏุฏ ุงูููุธููู ูู ูู ูุณู ูุน ุงุณุชุจุนุงุฏ ุงูุฃูุณุงู ุงููุงุฑุบุฉ

```sql
SELECT Dno, COUNT(*) AS EmpCount
FROM Employee
WHERE Dno IS NOT NULL
GROUP BY Dno;
```

### ูุซุงู 3: ุงูุฃูุณุงู ุงูุชู ูุชูุณุท ุฑุงุชุจูุง >= 10000 (ุงุณุชุฎุฏู HAVING)

```sql
SELECT Dno, AVG(salary) AS AvgSalary
FROM Employee
GROUP BY Dno
HAVING AVG(salary) >= 10000;
```

> ููุง `HAVING` ุทููุน ููุท ุงููุฌููุนุงุช (ุงูุฃูุณุงู) ุงููู ุชุญูู ุงูุดุฑุท ุจุนุฏ ุงูุญุณุงุจ.

### ูุซุงู 4: ุชุฌููุน ุนูู ุฃูุซุฑ ูู ุนููุฏ 

```sql
USE iti;
SELECT Dept_Id, St_Address, COUNT(*) AS [Number of students per Department]
FROM student
WHERE Dept_Id IS NOT NULL
GROUP BY Dept_Id, St_Address;
```

> ุณูุนุทู ุณุทุฑูุง ููู ูุฌููุนุฉ ูุฑูุฏุฉ ูู `Dept_Id` ู `St_Address`.

### ูุซุงู 5: ุงุณุชุฎุฏุงู `COUNT(DISTINCT ...)`

```sql
SELECT Dept_Id, COUNT(DISTINCT StudentID) AS UniqueStudents
FROM student
GROUP BY Dept_Id;
```

> `COUNT(DISTINCT ...)` ูุญุณุจ ุงูููู ุงูููููุฒุฉ ููุท ุฏุงุฎู ูู ูุฌููุนุฉ.

---

## 5) ููุงุฑูุฉ ุณุฑูุนุฉ: `GROUP BY` vs `OVER(PARTITION BY)`

- `GROUP BY` ูููููู ุนุฏุฏ ุงูุตููู ููุฑุฌุน ุณุทุฑ ููู ูุฌููุนุฉ.
    
- `OVER (PARTITION BY ...)` (ุฏูุงู ุงููุงูุฐุฉ) ูุง ุชูููู ุงูุตูููุ ุชุนุทู ูููุฉ ุชุฌููุนูุฉ ููู ุตู ุฏุงุฎู ูุฌููุนุชู.
    

**ูุซุงู ุชูุถูุญู :**

```sql
-- ูู ุตู ุณูุญูู ูููุฉ ุฃูู ุฑุงุชุจ ูู ูุณูู ูููู ุงูุตููู ูููุง ุชุจูู
SELECT E.*, MIN(salary) OVER (PARTITION BY Dno) AS DeptMinSalary
FROM Employee E;
```

---

## 6) ุณููู ุฎุงุต: NULLs ูู ุงูุชุฌููุน

- ุงูููู `NULL` ูู ุนููุฏ ุงูุชุฌููุน ุชูุนุชุจุฑ ูููุฉ ูุงุญุฏุฉ โ ูุนูู ูู ุงูุตููู ุงูุชู ูููุง `Dno = NULL` ุชุชุฌูุน ูุนูุง ูู ูุฌููุนุฉ ูุงุญุฏุฉ.
    

---

## 7) ุฃุฎุทุงุก ุดุงุฆุนุฉ ูููู ุชุชุฌูุจูุง

- **ูุณูุงู ุฅุถุงูุฉ ุนููุฏ ุบูุฑ ูุฌูุน ูู `GROUP BY`** โ ุฎุทุฃ ูู ุงูุงุณุชุนูุงู.
- **ุงุณุชุฎุฏุงู `WHERE` ุจุฏู `HAVING`** ุนูุฏูุง ุชุฑูุฏ ุชุตููุฉ ุจูุงุกู ุนูู aggregate โ ูุง ูุนูู.
- **ุงูุฎูุท ุจูู `COUNT(*)` ู `COUNT(col)`**: ุงูุฃููู ุชุนุฏ ูู ุงูุตูููุ ุงูุซุงููุฉ ุชุนุฏ ููุท ุงูุตููู ุงูุชู ุงููููุฉ ูููุง ููุณุช NULL.
- **ูุณูุฉ ุนูู ุตูุฑ** ุนูุฏ ุญุณุงุจ ุงููุชูุณุท ูู `SUM/COUNT` โ ุงุณุชุฎุฏู `NULLIF(COUNT(...),0)` ูุชูุงุฏู ุงููุณูุฉ ุนูู ุตูุฑ.

---

## 8)   ูุซุงู: 

ุฌุฏูู `Employee`:

|SSN|Fname|Dno|Salary|
|---|---|---|---|
|1|Ali|10|8000|
|2|Sara|10|10000|
|3|Omar|20|NULL|
|4|Mona|20|12000|
|5|John|NULL|7000|

ุงุณุชุนูุงู:

```sql
SELECT Dno, COUNT(*) AS Cnt, AVG(salary) AS AvgSal
FROM Employee
GROUP BY Dno;
```

ุงููุงุชุฌ ุงููุชูููุน:

- Dno = 10 โ Cnt = 2, AvgSal = (8000+10000)/2 = 9000
- Dno = 20 โ Cnt = 2, AvgSal = 12000 (NULL ูุชุฌุงููุฉ ูู AVG)
- Dno = NULL โ Cnt = 1, AvgSal = 7000


---

## 9) ุชูุฑูู ุตุบูุฑ ๐ถ  

1. ุงูุชุจ ุงุณุชุนูุงููุง ูุฌูุจ `Dno` ูุฅุฌูุงูู ุงูุฑูุงุชุจ ููู ูุณูุ ูุน ุงุณุชุจุนุงุฏ ุงูุฃูุณุงู ุงูุชู ุฅุฌูุงูู ุฑูุงุชุจูุง ุฃูู ูู 20000.
2. ุงูุชุจ ุงุณุชุนูุงููุง ูุฌูุจ `Dno` ูุนุฏุฏ ุงูููุธููู ูููุ ูุฑุชุจ ุงููุงุชุฌ ุชูุงุฒูููุง ุญุณุจ ุนุฏุฏ ุงูููุธููู.
3. ุงูุชุจ ุงุณุชุนูุงููุง ูุฌูุจ `Dept_Id` ู`St_Address` ูุนุฏุฏ ุงูุทูุงุจุ ุซู ุงุฎุชูุฑ ููุท ุงูุตููู ุงูุชู ุนุฏุฏ ุทูุงุจูุง >= 5.
