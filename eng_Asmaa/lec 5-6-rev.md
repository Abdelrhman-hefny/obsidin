# --------------  Wildcard Characters ------------


#### ุฅูุชู ูุณุชุฎุฏููุงุ

 ุชูุณุชุฎุฏู ูุน ุดุฑุท **`LIKE`** ูู ุฌููุฉ `WHERE` ุนุดุงู ูุนูู **ุจุญุซ ุนู ููุท** ุฏุงุฎู ูุตูุต (ุฃุณูุงุกุ ุนูุงูููุ ุฃููููุงุช...). ุงูุตูุบุฉ ุงูุนุงูุฉ:

```sql
SELECT column FROM Table
WHERE column LIKE 'pattern';
```

---

## 1) `_` (underscore) โ ููุซู **ุญุฑูุงู ูุงุญุฏุงู ููุท**

- ูุนูู: ุฃู ุญุฑู ูุงุญุฏ ููุงู `_`.
- ูุซุงู : ูุจุญุซ ุนู ุฃุณูุงุก ูููู ุงูุญุฑู ุงูุซุงูู ูููุง ูู `m`:
    
```sql
SELECT St_Fname
FROM Student
WHERE St_Fname LIKE '_m%';
```

-  `_` ูุทุงูุจ ุจุญุฑู ูุงุญุฏ (ุฃู ุญุฑู) ูู ุงูุจุฏุงูุฉุ ุซู `m` ูุงูุญุฑู ุงูุซุงููุ ุซู `%` ุฃู ุดูุก ุจุนุฏู.
- ุฃูุซูุฉ ูุชูุฌุฉ (ุฅุฐุง ูุงูุช ุงูุฃุณูุงุก ููุฌูุฏุฉ): `Amr`, `Emad`, `Amira` โ ูุฃู ุญุฑููู ุงูุซุงูู ูู `m` ุฃู `M` (ุงุนุชูุงุฏูุง ุนูู ุญุณุงุณูุฉ ุงูุญุฑูู ูู ุงููุงุนุฏุฉ).

**ููุงุญุธุฉ:** `_a` ูุนูู ุงุณู ููููู ูู ุญุฑููู ูููุชูู ุจู `a` (ูุซุงู ุงูุชุฑุงุถู: `Ma`).

## 2) `%` โ ููุซู **ุตูุฑ ุฃู ุฃูุซุฑ ูู ุงูุฃุญุฑู**

- ูุนูู: ุฃู ุณูุณูุฉ (ุญุชู ูุงุฑุบุฉ).
- ุฃูุซูุฉ:
    
    - `s%` โ ุฌููุน ุงูุฃุณูุงุก ุงูุชู **ุชุจุฏุฃ** ุจู `s` (ูุซู `Samy`, `Shaimaa`).
    - `%a` โ ุฌููุน ุงูุฃุณูุงุก ุงูุชู **ุชูุชูู** ุจู `a` (ูุซู `Sama`, `Amira`).
    - `%am%` โ ุฃู ุงุณู ูุญุชูู `am` ูู ุฃู ููุงู (`Samar`, `Yassmin`).
        
```sql
SELECT St_Fname FROM Student WHERE St_Fname LIKE 's%';
SELECT St_Fname FROM Student WHERE St_Fname LIKE '%a';
SELECT St_Fname FROM Student WHERE St_Fname LIKE '%am%';
```

---

## 3) `[]` โ ูุฌููุนุฉ ุฃุญุฑู ุฃู ูุทุงู

- ููุชุจ ุฏุงุฎู ุงูุฃููุงุณ ูุฌููุนุฉ ูู ุงูุญุฑูู ุฃู ูุทุงู ูุซู `[a-m]`.
- `'[sa]%'` โ ูุจุฏุฃ ุจู `s` ุฃู `a`.
- `'[a-m]%'` โ ูุจุฏุฃ ุจุฃู ุญุฑู ูู a ุฅูู m.
    - `'[0-9]%'` โ ูุจุฏุฃ ุจุฑูู (0 ุฅูู 9).

```sql
SELECT St_Fname FROM Student WHERE St_Fname LIKE '[sa]%';
SELECT St_Fname FROM Student WHERE St_Fname LIKE '[a-m]%';
```

-  ูุชุงุฆุฌ ูุชููุนุฉ: `'Ahmed'`, `'Shaimaa'`, `'Samy'` (ูู `[sa]%`).

---

## 4) `[^]` ุฃู `[!...]` โ ููู ุงููุฌููุนุฉ (ูุนูู **ููุณ** ุชูู ุงูุฃุญุฑู)

- `'[^sa]%'` โ ูุจุฏุฃ ุจุฃู ุญุฑู **ุบูุฑ** s ุฃู a.

```sql
SELECT St_Fname FROM Student WHERE St_Fname LIKE '[^sa]%';
```

- ุณูุนูุฏ ุฃุณูุงุก ูุซู `Mohamed`, `Marwa`, `Essam` (ูุง ุชุจุฏุฃ ุจู s ุฃู a).

---

## 5) ุฃูุซูุฉ ุฎุงุตุฉ: ุชุทุงุจู ูุญุงุฑู ุงูุจุฏู ููุณูุง (escape)

ูู ุนุงูุฒ ุชุจุญุซ ุนู ูุต ููู `%` ุฃู `_` ุญุฑูููุง (ูุด ูู wildcard) ุชูุฏุฑ:
- ุชุณุชุฎุฏู ุงูุฃููุงุณ: `[%]` ุฃู `[_]` ุฏุงุฎู `LIKE` (ูู SQL Server ูุฐุง ูุนูู).

```sql
-- ูุซุงู: ุงุฎุชูุงุฑ ุงูุตููู ุงูุชู ุชุญุชูู ุนูู ุนูุงูุฉ % ุฏุงุฎู ุงููุต
SELECT St_Fname FROM Student WHERE St_Fname LIKE '%[%]%';
```

- ุฃู ุชุณุชุฎุฏู `ESCAPE` ูุชุญุฏูุฏ ุญุฑู ูุฑูุจ:
```sql
-- ูุจุญุซ ุนู ุงูุณูุงุณู ุงูุชู ุชุญุชูู ุนูู "50%" ุญุฑููุงู
SELECT Col FROM T
WHERE Col LIKE '%50\%%' ESCAPE '\';
```

---

## 6) ูุณุฃูุฉ ุญุณุงุณูุฉ ุงูุญุฑูู (Case sensitivity)

- ูู SQL Server: ุญุณุงุณูุฉ ุงูุญุฑูู ุชุนุชูุฏ ุนูู **collation**. ุบุงูุจูุง ุชููู ุบูุฑ ุญุณุงุณุฉ (A = a). ูู ุจุฏู ุฅุฌุจุงุฑ ุญุณุงุณูุฉ:
```sql
SELECT St_Fname FROM Student
WHERE St_Fname COLLATE Latin1_General_CS_AS LIKE 'A%';
```

---


---

## ุชูุงุฑูู ุจุณูุทุฉ

1. ุฃูุฌุฏ ูู ุงูุฃุณูุงุก ุงูุชู ุชุจุฏุฃ ุจุญุฑู `S` ุฃู `s`.  
 2. ุฃูุฌุฏ ุงูุฃุณูุงุก ุงูุชู ุชุญุชูู `am` ูู ุฃู ููุงู.  
3. ุฃูุฌุฏ ุงูุฃุณูุงุก ุงูุชู ูุจุฏุฃ ุญุฑููุง ุงูุฃูู ุจูู `a` ู `m`.  
4. ุฃูุฌุฏ ุงูุฃุณูุงุก ุงูุชู ุชุญุชูู ุญุฑู `%` ูุนูููุง ุฏุงุฎููุง (ูุซุงู: `Word%`).  

---

# ------ุนุฑุถ ุงูุจูุงูุงุช ุจุฏูู ุชูุฑุงุฑ (DISTINCT) ---------

##  1 โ **ุนุฑุถ ุงูุจูุงูุงุช ุจุฏูู ุชูุฑุงุฑ (DISTINCT)**

### ุงูููุฑุฉ

`DISTINCT` ุจุชุฎูู ูุชูุฌุฉ ุงูุงุณุชุนูุงู ุชุญุฐู ุงูุตููู ุงูููุฑุฑุฉุ ูุนูู ุชุฑุฌุน ูู ูู ูููุฉ ูุฑูุฏุฉ ูุฑุฉ ูุงุญุฏุฉ.

### ุงูุชุฑููุจ ุงูุนุงู

```sql
SELECT DISTINCT column1, column2
FROM [dbo].[Student];
```

### ูุซุงู ุนููู (ูู ุนูุฏู)

```sql
select Distinct St_Fname 
from [dbo].[Student];
```

### ุชูุถูุญ ุจูุซุงู ุตุบูุฑ (ุชุฎููู)

ุฌุฏูู `Student` ูุญุชูู ุนูู ุงูุตููู:

```
St_Fname
---------
Ahmed
Mohamed
Ahmed
Samar
Mohamed
```

`SELECT DISTINCT St_Fname FROM Student;`  
ุงููุชูุฌุฉ ุณุชููู:

```
St_Fname
---------
Ahmed
Mohamed
Samar
```

### ููุงุท ูููุฉ 

- **DISTINCT ุนูู ุฃูุซุฑ ูู ุนููุฏ** โ ูุฒูู ุงูุชูุฑุงุฑ ุจูุงุกู ุนูู _ูุฌููุน ุงูููู_ ูู ุงูุฃุนูุฏุฉ ุงููุญุฏุฏุฉ (ุฃู: ุชุฑููุจุงุช ุงูููู).
    
    ```sql
    SELECT DISTINCT St_Fname, St_Address FROM Student;
    ```
    
    ูุฐุง ูุนูุฏ ูู ุชุฑููุจุฉ ุงุณู-ุนููุงู ูุฑุฉ ูุงุญุฏุฉ.
    
- **NULLs**: ุงูููู `NULL` ุชูุนุงูู ููููุฉ ูุงุญุฏุฉ ูู ุญูุซ ุงูู `DISTINCT` (ุชูุนุฑุถ `NULL` ูุฑุฉ ูุงุญุฏุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ ูุฑุงุช ูุชุนุฏุฏุฉ).
    
- **DISTINCT + ORDER BY**: ุฅุฐุง ุงุณุชุฎุฏูุช `DISTINCT` ูู SQL Serverุ ุนููุฏ ุงูู `ORDER BY` ูุฌุจ ุฃู ูููู ุถูู ูุงุฆูุฉ ุงูุฃุนูุฏุฉ ูู `SELECT DISTINCT` (ุฃู ููููู ุงุณุชุฎุฏุงู ุงูุฑูู ุงูุชุฑุชูุจู ููุนููุฏ). ูุซุงู ุตุญูุญ:
    
    ```sql
    SELECT DISTINCT St_Fname
    FROM Student
    ORDER BY St_Fname;
    ```
    
- **DISTINCT vs GROUP BY**: ูููู ุชุณุชุฎุฏู `GROUP BY` ููุญุตูู ุนูู ูุชุงุฆุฌ ูุฑูุฏุฉ ุฃูุถุงูุ ููู `GROUP BY` ูุณุชุฎุฏู ุนุงุฏุฉ ูุน ุฏูุงู ุชุฌููุนูุฉ (ูุซู `COUNT`, `SUM`). ููุงููุง ูุฒูู ุงูุชูุฑุงุฑ ููู ุงูุบุฑุถ ูุฏ ูุฎุชูู.
    
- **ุฃุฏุงุก**: `DISTINCT` ูุฏ ูุญุชุงุฌ ููุฑุฒ ุฃู ุชุฌููุน ุฏุงุฎูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (costly ุนูู ุฌุฏุงูู ูุจูุฑุฉ). ุฅู ุฃูููุ ุงุนูู ููุฑุณ ุนูู ุงูุนููุฏ ุงููู ุจุชุนูู ุนููู `DISTINCT` ูุชุญุณูู ุงูุฃุฏุงุก.
    

---
# ----------- **ุชุฑุชูุจ ุงููุชุงุฆุฌ (ORDER BY)** ----------------

ุง `ORDER BY` ุจุชุฑุชุจ ูุงุชุฌ ุงูุงุณุชุนูุงู ุจุญุณุจ ุนููุฏ ุฃู ุฃูุซุฑุ ุชุตุงุนุฏู ุฃู ุชูุงุฒูู.

### ุงูุชุฑููุจ ุงูุนุงู

```sql
SELECT column1, column2
FROM [dbo].[Student]
ORDER BY column1 ASC, column2 DESC;
```

- `ASC` = ุชุตุงุนุฏู (ุงูุชุฑุงุถู).
- `DESC` = ุชูุงุฒูู.
### ุฃูุซูุฉ ุนูููุฉ

1. ุชุฑุชูุจ ุฃุณูุงุก ุงูุทูุงุจ ุฃุจุฌุฏูุงู:
```sql
select St_Fname from [dbo].[Student]
order by St_Fname;
```

2. ุชุฑุชูุจ ุจุงูุนูุณ (ูู ุฒ ุฅูู ุฃ):
```sql
select St_Fname from [dbo].[Student]
order by St_Fname desc;
```

3. ุชุฑุชูุจ ุญุณุจ ุงููุฏููุฉ ุซู ุงูุงุณู (ุงููุฏููุฉ ุชุตุงุนุฏูุ ุงูุงุณู ุชูุงุฒูู):
```sql
select St_Fname, St_Address
from [dbo].[Student]
order by St_Address asc, St_Fname desc;
```

4. ุงุณุชุฎุฏุงู ุชุฑุชูุจ ุจุงูุฑูู ุงูุชุฑุชูุจู ููุนููุฏ ูู SELECT:
```sql
select St_Fname, St_Address
from [dbo].[Student]
order by 2, 1; -- ููุง 2 ูุนูู St_Address ุซู 1 ูุนูู St_Fname
```

### (ุญุงูุงุช ุฎุงุตุฉ )

- **ุงููุฑู ุจูู ูุตูุต ูุฃุฑูุงู**: ุฅุฐุง ุงูุนููุฏ ูุฎุฒู ููุต ูููู ูู ุงููุงูุน ุฃุฑูุงู (`'2'`, `'10'`)ุ ุงูุชุฑุชูุจ ุงูุฃุจุฌุฏู ุณูุนุทู `'10'` ูุจู `'2'`. ูู ุนุงูุฒ ุชุฑุชูุจ ุฑูููุ ุญููู ุงูููุน:
    ```sql
    SELECT col FROM T
    ORDER BY CAST(col AS INT);
    ```
    
- **NULLs ูู ุงูุชุฑุชูุจ**: ููุงุนุฏ ุงูุจูุงูุงุช ุชุฎุชูู. ูู SQL Server ุนุงุฏุฉู NULL ุชูุนุงูู ููููุฉ ุตุบูุฑุฉ ูุชุธูุฑ ุฃููุงู ุนูุฏ `ORDER BY col ASC`. ูู ุนุงูุฒ ุชุถูู ููุงู NULLุ ุงุณุชุนูู `CASE`:
    
    ```sql
    -- ูู ุนุงูุฒ NULL ุชุธูุฑ ูู ุงูุขุฎุฑ
    SELECT St_Fname, St_Address
    FROM Student
    ORDER BY CASE WHEN St_Address IS NULL THEN 1 ELSE 0 END, St_Address;
    ```
    
- **ุงูุฃุฏุงุก**: `ORDER BY` ูุคุฏู ุฅูู ุนูููุฉ ูุฑุฒ ูููู ุฃู ุชููู ููููุฉ ุนูู ูุฌููุนุงุช ูุจูุฑุฉ. ูู ุนูุฏู ููุฑุณ (index) ูุฑุชุจ ุจููุณ ุชุฑุชูุจ ุงูุฃุนูุฏุฉุ ุงูู DB engine ูููู ูุณุชููุฏ ููู ููุชูุงุฏู ุงููุฑุฒ.
    
- **TOP ูุน ORDER BY** (SQL Server): ุชุณุชุฎุฏู `ORDER BY` ูุน `TOP` ููุญุตูู ุนูู ุฃุนูู/ุฃุฏูู N ุตู:
    
    ```sql
    SELECT TOP 5 St_Fname FROM Student ORDER BY St_Fname;
    ```
    

---

## ุฃูุซูุฉ ูุฑููุจุฉ (DISTINCT + ORDER BY)

```sql
-- ุฃุณูุงุก ูุฑูุฏุฉ ูุฑุชุจุฉ ุฃุจุฌุฏูุงู
SELECT DISTINCT St_Fname
FROM [dbo].[Student]
ORDER BY St_Fname;
```

ููู: ุนูุฏ ุงุณุชุฎุฏุงู `DISTINCT` ู `ORDER BY` ุชุฃูุฏ ุฅู ุนููุฏ ุงูุชุฑุชูุจ ููุฌูุฏ ูู ูุงุฆูุฉ ุงูู SELECT (SQL Server ูุทูุจ ุฐูู).

---

## ุชูุงุฑูู ูุตูุฑุฉ 

1. ุฃูุฌุฏ ูู ุงููุฏู ุงููุฑูุฏุฉ ูู ุฌุฏูู ุงูุทูุงุจ ูุฑุชุจูุง ุชุตุงุนุฏูุงู.  
2. ุฃูุฌุฏ ุฃุณูุงุก ุงูุทูุงุจ ุงููุฑูุฏุฉ ูุน ุนูุงููููู (ูู ุชุฑููุจุฉ ูุฑุฉ ูุงุญุฏุฉ) ูุงุฐูุจ ุฃููุงู ููุทูุงุจ ุงูุฐูู ุนููุงููู ููุณ `NULL`.  
3. ุฃูุฌุฏ ุฃูู 3 ุฃุณูุงุก ุฃุจุฌุฏูุงู.  
4. ุนูุฏู ุนููุฏ `phone` ูุฎุฒู ููุตุ ููู ุชุฑุฌุน ุงูุฃุฑูุงู ูุฑุชุจุฉ ุชุฑุชูุจูุง ุฑููููุงุ  

---

# ------------------ **Joins &  Self Join**  ---------------------

## ููุฏูุฉ ุณุฑูุนุฉ

ุงูู **JOINs** ุจุชุฎููููุง ูุฑุจุท ุจูู ุฌุฏูููู (ุฃู ุฃูุซุฑ) ุนูุดุงู ูุฌูุจ ุจูุงูุงุช ูุฑูุจุฉ โ ูุซูุงู ุงุณู ุงูุทุงูุจ + ุงุณู ุงููุณู ุจุชุงุนู. ูู ููุน join ููู ูุงุนุฏุฉ ุนูู ูุฎุชููุฉ ุจุชุชุญูู ุฃู ุตููู ูุชุฑุฌุน.

### ุจูุงูุงุช ุชุฌุฑูุจูุฉ ุจุณูุทุฉ

**ุฌุฏูู Student**

```
St_Id | St_Fname | Dept_Id | St_super
------------------------------------
1     | Ahmed    | 10      | NULL
2     | Samy     | 20      | 1
3     | Mariam   | NULL    | 2
4     | Omar     | 30      | NULL
```

**ุฌุฏูู Department**

```
Dept_Id | Dept_Name
-------------------
10      | SD
20      | IT
40      | HR
```

ููุงุญุธุงุช: Dept_Id = 30 ูุง ุชูุฌุฏ ูู Department (ุญุชู ููุธูุฑ ุญุงูุงุช ูุง ุชุทุงุจู). Dept_Id = 40 (HR) ููุณ ูู ุทูุงุจ.

---

# 4.1 Cross Join (ุงูุถุฑุจ ุงููุงุฑุชูุฒู)

**ุงูููุฑุฉ:** ูุทุจุน ูู ุชุฑููุจุฉ ูู ุตููู ุงูุฌุฏูููู โ ูู ุตู ูู A ูุน ูู ุตู ูู B.

**ุงูุตูุบุฉ ุงููุฏููุฉ:**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s, [dbo].[Department] d;
```

**ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ (ุฃูุถุญ):**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
CROSS JOIN [dbo].[Department] d;
```

**ูุชูุฌุฉ ุจุงููุซุงู:** (4 ุทูุงุจ ร 3 ุฃูุณุงู = 12 ุตู)

```
Ahmed SD
Ahmed IT
Ahmed HR
Samy  SD
Samy  IT
...
Omar  HR
```

**ูุชู ุชูุณุชุฎุฏูุ** ูููููุง ูุง ุชูุณุชุฎุฏู ูู ุงูุญุงูุงุช ุงูุนุงุฏูุฉ โ ูููุฏุฉ ูู ูุญุชุงุฌ ุชูููุฏ ูู ุงูุชุฑููุจุงุช ุงูููููุฉ (combinations). **ุชุญุฐูุฑ:** ูููู ุชูุชุฌ ุนุฏุฏ ุตููู ุถุฎู โ ุงุญุฐุฑ ุนูู ููุงุนุฏ ุจูุงูุงุช ูุจูุฑุฉ.

---

# 4.2 Inner Join (ุงูุฑุจุท ุงูุฏุงุฎูู)

**ุงูููุฑุฉ:** ูุฑุฌุน ุงูุตููู ุงูุชู **ุชุทุงุจู** ุดุฑุท ุงูุฑุจุท ููุท (ุงูุงุดุชุฑุงู ูู ุงููููุฉ).

**ุงูุตูุบุฉ ุงููุฏููุฉ (ุงุณุชุฎุฏูุช WHERE ููุฑุจุท):**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s, [dbo].[Department] d
WHERE d.Dept_Id = s.Dept_Id;
```

**ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ (ุฃูุณุจ ู ุฃูุถุญ):**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
INNER JOIN [dbo].[Department] d
  ON d.Dept_Id = s.Dept_Id;
```

**ูุซุงู ูุน ููุชุฑุฉ:**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
INNER JOIN [dbo].[Department] d
  ON d.Dept_Id = s.Dept_Id
WHERE d.Dept_Name = 'SD';
```

**ูุชูุฌุฉ ูู ุจูุงูุงุช ุงููุซุงู:**

- Ahmed โ SD  
    (ูุฃู Ahmed ูู ุงููุญูุฏ ุงููู Dept_Id ุจุชุงุนู 10 ูุงูู Dept_Name ููู10 = SD)
    

**ูุชู ุชูุณุชุฎุฏูุ** ููุง ุชุญุชุงุฌ **ููุท** ุงูุตููู ุงููุฑุชุจุทุฉ (ูุซูุงู: ุทูุงุจ ูุฏููู ูุณู ูุนุฑูู). ูุฐู ูู ุฃูุซุฑ ุฃููุงุน ุงูู JOIN ุงุณุชุฎุฏุงูุงู.

---

# 4.3 Outer Joins (ุงูุฑุจุท ุงูุฎุงุฑุฌู)

## ุฃ) Left Outer Join (LEFT JOIN)

**ุงูููุฑุฉ:** ูุฑุฌุน ูู ุตู ูู ุงูุฌุฏูู ุงููุณุงุฑู (left)ุ ููุนุงู ุตููุต ูุทุงุจูุฉ ูู ุงูุฌุฏูู ุงูููููู (right) ุฅู ููุฌุฏุช. ูู ูุง ููุด ุชุทุงุจูุ ููู ุงูุฌุฏูู ุงูููููู ุจุชููู `NULL`.

**ูุซุงู:**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
LEFT JOIN [dbo].[Department] d
  ON d.Dept_Id = s.Dept_Id;
```

**ูุชูุฌุฉ (ูู ุจูุงูุงุชูุง):**

```
Ahmed   | SD      -- ุชุทุงุจู
Samy    | IT      -- ุชุทุงุจู
Mariam  | NULL    -- Dept_Id = NULL => ูุง ุชุทุงุจู
Omar    | NULL    -- Dept_Id = 30 => no dept found
```

**ูุชู ุชูุณุชุฎุฏูุ** ููุง ุชุฑูุฏ _ูู_ ุตููู ุงูุฌุฏูู ุงูุฃูู (ุงููุณุงุฑ) ุญุชู ูู ูุง ุนูุฏูุงุด ุชุทุงุจู ูู ุงูุฌุฏูู ุงูุซุงูู (ูุซูุงู: ูุงุฆูุฉ ูู ุงูุทูุงุจ + ุงุณู ุงููุณู ุฅู ููุฌุฏ).

---

## ุจ) Right Outer Join (RIGHT JOIN)

**ุงูููุฑุฉ:** ุนูุณ ุงูู LEFT JOIN โ ูุฑุฌุน ูู ุตู ูู ุงูุฌุฏูู ุงูููููู ููุนุงู ุงูุชุทุงุจูุงุช ูู ุงูุฌุฏูู ุงููุณุงุฑู ุฃู `NULL` ุฅู ูู ุชูุฌุฏ.

**ูุซุงู:**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
RIGHT JOIN [dbo].[Department] d
  ON d.Dept_Id = s.Dept_Id;
```

**ูุชูุฌุฉ (ูู ุจูุงูุงุชูุง):**

```
Ahmed  | SD     -- ูุทุงุจูุฉ
Samy   | IT     -- ูุทุงุจูุฉ
NULL   | HR     -- ูุณู HR (Dept_Id=40) ููุณ ูู ุทูุงุจ
```

**ูุชู ุชูุณุชุฎุฏูุ** ูู ุงูููุชู ุจูู ุตููู ุงูุฌุฏูู ุงูุซุงูู (ุงูููููู) ุญุชู ูู ูุง ุนูุฏู ุทูุงุจ/ููุงุจูุงุช.

---

## ุฌ) Full Outer Join (FULL JOIN)

**ุงูููุฑุฉ:** ูุฌูุน ุจูู LEFT ู RIGHT: ูู ุตููู ูููููุงุ ูููุงู ูุง ูุง ููุฌุฏ ุชุทุงุจู ุชูุนุจุฃ ุจุงูููู `NULL`.

**ูุซุงู:**

```sql
SELECT s.St_Fname, d.Dept_Name
FROM [dbo].[Student] s
FULL OUTER JOIN [dbo].[Department] d
  ON d.Dept_Id = s.Dept_Id;
```

**ูุชูุฌุฉ (ูู ุจูุงูุงุชูุง):**

```
Ahmed   | SD
Samy    | IT
Mariam  | NULL
Omar    | NULL
NULL    | HR
```

**ูุชู ุชูุณุชุฎุฏูุ** ูู ุนุงูุฒ ุฑุคูุฉ ูุงููุฉ ูุฃู ุงุฎุชูุงูุงุช ุจูู ุงูุฌุฏูููู โ ูู ูุณุงุนุฏ ูู ูุตูููุงุช ุงูุชุทุงุจู/ุงููุงูุชุทุงุจู.

---

### ุชุญุฐูุฑ/ูุดููุฉ ุดุงุฆุนุฉ โ ุดุฑูุท WHERE ุจุนุฏ Outer Join

ูู ุนููุช `LEFT JOIN` ูุจุนุฏ ูุฏู ูุถุนุช ุดุฑุท ูู `WHERE` ุนูู ุนููุฏ ูู ุงูุฌุฏูู ุงููููููุ ุงูุดุฑุท ูููู ููุถู ุนูู ุตููู `NULL` ููุญููู ุงููุชูุฌุฉ ูุนูููุง ุฅูู `INNER JOIN`. ูุซุงู:

```sql
-- ูููู ูุธูุฑ ูู INNER JOIN ูุฃูู ุจุนุฏ ุงููุฑุฒ ูููู ุฃู ุตู ูููู d.Dept_Name IS NULL
SELECT s.St_Fname, d.Dept_Name
FROM Student s
LEFT JOIN Department d ON d.Dept_Id = s.Dept_Id
WHERE d.Dept_Name = 'SD';
```

**ุงูุจุฏูู ููุญูุงุธ ุนูู ุงูู LEFT JOIN:**

- ุญุท ุดุฑุท ุงูุชุตููุฉ ุฏุงุฎู ุงูู `ON` ุจุฏู `WHERE`:
    

```sql
SELECT s.St_Fname, d.Dept_Name
FROM Student s
LEFT JOIN Department d
  ON d.Dept_Id = s.Dept_Id
  AND d.Dept_Name = 'SD';
```

ุจูุฐู ุงูุทุฑููุฉ ุชุญุชูุธ ุจูู ุงูุทูุงุจุ ููู ุฏ.Dept_Name ุณูููู 'SD' ููุฐูู ุชุทุงุจููุง ููุน `NULL` ููุขุฎุฑูู.

---

# 5. ----------- Self Join (ุฑุจุท ุงูุฌุฏูู ุจููุณู) ---------------


**ุงูููุฑุฉ:** ููุง ุงูุตู ุงููุงุญุฏ ูู ุงูุฌุฏูู ูุฑุชุจุท ุจุตู ุขุฎุฑ ูู ููุณ ุงูุฌุฏูู โ ูุซุงู ุดุงุฆุน: ุฌุฏูู ููุธููู ูู ููุธู ูู ูุดุฑู (supervisor) ูุงูู supervisor ูู ุฃูุถุงู ุตู ูู ููุณ ุงูุฌุฏูู.

**ุจูุงูุงุช ุชูุถูุญูุฉ ุจุณูุทุฉ (ูุฃุฎูุฐุฉ ูู ุงูStudent ุฃุนูุงู):**

```
1 | Ahmed   | St_super = NULL
2 | Samy    | St_super = 1    -- Samy ูุดุฑูู Ahmed
3 | Mariam  | St_super = 2    -- Mariam ูุดุฑููุง Samy
4 | Omar    | St_super = NULL
```

**ุงุณุชุนูุงู ูุฅุธูุงุฑ ุงุณู ุงูุทุงูุจ ูุงุณู ุงููุดุฑู (Inner -> ููุท ูู ููู ูุดุฑู):**

```sql
SELECT stud.St_Id  AS 'ุฑูู_ุงูุทุงูุจ',
       stud.St_Fname AS 'ุงุณู_ุงูุทุงูุจ',
       supervisor.St_Fname AS 'ุงุณู_ุงููุดุฑู'
FROM [dbo].[Student] stud
INNER JOIN [dbo].[Student] supervisor
  ON supervisor.St_Id = stud.St_super;
```

**ูุชูุฌุฉ (Inner):**

```
2 | Samy   | Ahmed
3 | Mariam | Samy
```

**ูู ุนุงูุฒ ูู ุงูุทูุงุจ ููุน ุงุณู ุงููุดุฑู ุฅู ููุฌุฏ (Left Self Join):**

```sql
SELECT stud.St_Id, stud.St_Fname, supervisor.St_Fname AS 'ุงุณู_ุงููุดุฑู'
FROM [dbo].[Student] stud
LEFT JOIN [dbo].[Student] supervisor
  ON supervisor.St_Id = stud.St_super;
```

**ูุชูุฌุฉ (Left):**

```
1 | Ahmed   | NULL
2 | Samy    | Ahmed
3 | Mariam  | Samy
4 | Omar    | NULL
```

**ูุชู ุชูุณุชุฎุฏูุ** ูุนูุงูุงุช ูุฑููุฉ ุฏุงุฎู ููุณ ุงูุฌุฏูู: ูุดุฑู/ูุฑุคูุณุ ูุฏูุฑ/ููุธูุ ุฃุฌุฒุงุก/ูููููุงุชุ ุดุฌุฑุฉ ุนุงุฆูุฉุ ุงูุฎ.

---

##  ุฃูุถู ููุงุฑุณุงุช

- **ุงุณุชุฎุฏู ุงูุตูุบุฉ ุงูุฌุฏูุฏุฉ** (`JOIN ... ON`) ูุฃููุง ุฃูุถุญ ูุฃุณูู ููุตูุงูุฉ.
    
- **ุงุณุชุฎุฏู ุฃููุงุจ (aliases)** ูุซู `s`, `d` ูุชุญุฏูุฏ ุงูุฃุนูุฏุฉ ูุชูุงุฏู ุงูุงูุชุจุงุณ.
    
- **ูุง ุชูุณู ุดุฑุท ON** โ ูุณูุงู `ON` ูุน `JOIN` ูุคุฏู ุฅูู ูุชูุฌุฉ ุฎุงุทุฆุฉ (ุฃู cartesian).
    
- **ุงูุชุจู ููู WHERE ุจุนุฏ ุงูู OUTER JOIN** โ ููููู ุชุญููู ุงูู outer ุฅูู inner ููุง ุดุฑุญูุง.
    
- **ูุง ุชุณุชุฎุฏู `SELECT *` ูู ุงุณุชุนูุงูุงุช ุฅูุชุงุฌูุฉ**ุ ุงูุชุจ ุงูุฃุนูุฏุฉ ุตุฑุงุญุฉู ูุชุญุณู ุงูุฃุฏุงุก ูุชููู ุงูุจูุงูุงุช ุงููุฑุณูุฉ.
    
- **ููุฑุณ ุฃุนูุฏุฉ ุงูุฑุจุท (join columns)** ูุซู `Dept_Id` ูุชุญุณูู ุฃุฏุงุก ุงูุฑุจุท ุนูู ุฌุฏุงูู ูุจูุฑุฉ.
    
- **ุงุฎุชุจุฑ ุนูู ุจูุงูุงุช ุตุบูุฑุฉ ุฃููุงู** ูุชุชุฃูุฏ ูู ุงููุชูุฌุฉ ูุจู ุชุทุจูููุง ุนูู ูุงุนุฏุฉ ูุจูุฑุฉ.
    

---

## ุชูุงุฑูู ุณุฑูุนุฉ ูููุฑุงุฌุนุฉ

1. ุงุนุฑุถ ูู ุงูุทูุงุจ ูุน ุฃุณูุงุก ุฃูุณุงููู (ุญุชู ูู ุงููุณู ููููุฏ).  
2. ุงุนุฑุถ ูู ุงูุฃูุณุงู (ุญุชู ูู ูุง ุนูุฏูุง ุทูุงุจ).  
3. ุงุนุฑุถ ุงุณู ุงูุทุงูุจ ูุงุณู ุงููุดุฑู ููุ ูุงุธูุฑ ุฃูุถุงู ุงูุทูุงุจ ุจุฏูู ูุดุฑู.  
4. ูุงุฐุง ูุญุฏุซ ูู ูุชุจุช `FROM Student s, Department d` ุจุฏูู `WHERE` ุฃู `ON`ุ ุฌุฑุจ ูุงุญุณุจ ุนุฏุฏ ุงูุตููู.  




+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++



# -------------- **ุงููุนุงููุงุช (Transactions) ูุนูููุงุช ุงูุญุฐู ุงูุขููุฉ (Temporary / Safe Delete)** ---------------------------


##  ููู ูุณุชุฎุฏู Transactionsุ

ููุง ุชุนูู ุชุบููุฑุงุช ุจูุงูุงุช (INSERT / UPDATE / DELETE) ูููู ุชุญุตู ุฃุฎุทุงุก. `TRANSACTION` ูุณูุญ ูู ุชุฌุง ูุนุงููุฉ ูุงููุฉ ูู ยซุนูููุฉ ูุงุญุฏุฉยป: ุฃู ุชุชููููุฐ ูููุง (`COMMIT`) ุฃู ูู ุญุตู ุฎุทุฃ ุชุฑุฌููุน ูู ุญุงุฌุฉ ุฒู ูุง ูุงูุช (`ROLLBACK`). ูููุฏ ุฌุฏูุง ููุญูุงูุฉ ูู ุงูุญุฐู ุงูุฎุงุทุฆ ุฃู ุงูุชุบููุฑุงุช ุงูุฌุฒุฆูุฉ.

---
## ุงูุฃูุงูุฑ ุงูุฃุณุงุณูุฉ

- `BEGIN TRANSACTION` โ ูุจุฏุฃ ุงููุนุงููุฉ.
- `COMMIT` โ ูุญูุธ ุงูุชุบููุฑุงุช ููุงุฆูุงู.
- `ROLLBACK` โ ูุฑุฌุน ุงูุชุบููุฑุงุช (ุชูุบู ูู ุดูุก ุจุนุฏ ุงูู `BEGIN`).
- `@@ROWCOUNT` โ ุฏุงูุฉ ุชุนุทูู ุนุฏุฏ ุงูุตููู ุงููุชุฃุซุฑุฉ ูู ุขุฎุฑ ุฃูุฑ (ูุซู DELETE ุฃู UPDATE).
    

---

## ูุซุงู ุนููู ุขูู (ุฎุทูุฉ ุจุฎุทูุฉ)

ูุฐุง ูุซุงู ุนููู ูุฃุฎูุฐ ูู ููุฏู โ ูุญุฐู ููุธููู ููููุฏูู ูู ุดูุฑ 5 (ูุงูู) ููู ุจุทุฑููุฉ ุขููุฉ ููุฏุฑ ูุฑุงุฌุน ูุจู ุงูุญูุธ:

```sql
USE CompanyG01;
-- 1) ุงูุญุต ุฃูููุง ุฃู ุตููู ูุชุชุฃุซุฑ
SELECT * 
FROM Employees
WHERE MONTH(BirthDate) = 5;

-- 2) ุงุจุฏุฃ ุงููุนุงููุฉ
BEGIN TRANSACTION;

-- 3) ุงุญุฐู (ููู ุงูุชุบููุฑ ูุคูุช ูุญุฏ ูุง ุชุนูู COMMIT)
DELETE FROM Employees
WHERE MONTH(BirthDate) = 5;

-- 4) ุงุนุฑู ูุงู ุตู ุงุชุญุฐู
SELECT @@ROWCOUNT AS RowsDeleted;

-- 5) ูู ุงููุชุงุฆุฌ ูููุณุฉ:
COMMIT; -- ูุญูุธ ุงูุชุบููุฑุงุช
-- ูู ุญุตู ุฎุทุฃ ุฃู ูุด ุนุงูุฒ ุงูุญุฐู:
-- ROLLBACK; -- ูุณุชุฑุฌุน ุงูุจูุงูุงุช ููุง ูุงูุช
```

**ุชูุณูุฑ ุฎุทูุฉ ุจุฎุทูุฉ:**

1. `SELECT` ูุจู ุงูุญุฐู: ุฏุง ุฃูุถู ููุงุฑุณุงุช โ ุดูู ุงูุตููู ุงููู ูุชุชุฃุซุฑ ูุจู ูุง ุชูุณุญูุง.
2. `BEGIN TRANSACTION` ูุจุฏุฃ ูุถุน ูุคูุช: ุงูุญุฐู ููููุฐ ูููู ุบูุฑ ููุงุฆู.
3. `DELETE ...` ููููุฐ ููุคุซุฑ ุนูู ุตููู ุฏุงุฎู ุงููุนุงููุฉ.
4. `SELECT @@ROWCOUNT` ูุนุทู ุนุฏุฏ ุงูุตููู ุงูุชู ุญูุฐูุช (ูููู ุชุณุชุฎุฏูู ูุงุชุฎุงุฐ ูุฑุงุฑ).
5. ูู ุชู ูุนูู `COMMIT`ู ูุญูุธ. ูู ูุงุ `ROLLBACK` ูุฑุฌุน ูู ุดูุก.
    

---

## ูุซุงู ุชููุงุฆู ุจุงูุชุญูู ูุงูุฅุฑุฌุงุน (TRY/CATCH)

ูู ุจุชุญุจ ุชุฎูู ุงูุนูููุฉ ุชููุงุฆูุฉ (ูู ุญุตู ุฎุทุฃ ุชุฑุฌุน ุชููุงุฆูุงู)ุ ุชูุฏุฑ ุชุณุชุฎุฏู ุงูุจููู ุงูุชุงูู ูู SQL Server:

```sql
USE CompanyG01;
BEGIN TRY
  BEGIN TRANSACTION;

  DELETE FROM Employees
  WHERE MONTH(BirthDate) = 5;

  SELECT @@ROWCOUNT AS RowsDeleted;

  -- ูุซุงู ูุฑุงุฑ: ูู ูููุด ุตููู ุงุชุญุฐูุช ูููู ูุฑูู ุฎุทุฃ
  IF @@ROWCOUNT = 0
  BEGIN
    RAISERROR('No employees deleted - aborting.', 16, 1);
  END

  COMMIT TRANSACTION;
END TRY
BEGIN CATCH
  ROLLBACK TRANSACTION;
  SELECT ERROR_NUMBER() AS ErrNo, ERROR_MESSAGE() AS ErrMsg;
END CATCH;
```

---

## ุงุณุชุฎุฏุงู `OUTPUT` ูุนุฑุถ/ุญูุธ ุงูุตููู ุงููุญุฐููุฉ

ูููุฏ ูู ุนุงูุฒ ุชุญุชูุธ ุจุณุฌู (audit) ุฃู ุชุนุฑุถ ูุง ุชู ุญุฐูู:

```sql
USE CompanyG01;
DECLARE @DeletedRows TABLE (EmpId INT, Fname NVARCHAR(100), BirthDate DATE);

BEGIN TRANSACTION;

DELETE FROM Employees
OUTPUT deleted.EmpId, deleted.Fname, deleted.BirthDate INTO @DeletedRows
WHERE MONTH(BirthDate) = 5;

SELECT * FROM @DeletedRows;  -- ุชุดูู ุงูุตููู ุงููู ุงุช ุญุฐููุช

-- ุจุนุฏ ุงููุฑุงุฌุนุฉ:
COMMIT;
-- ุฃู ูู ูุด ุนุงุฌุจู:
-- ROLLBACK;
```

---

## ููุงุท ูููุฉ 

- **ูุง ุชูู ุจุนูู `DELETE` ุจุฏูู `WHERE`** ุฅูุง ูู ูุนูุงู ุชุฑูุฏ ุชูุณุญ ูู ุงูุตููู.
- **ุงูุญุต ุฃููุงู** ุจุงูู `SELECT` ุซู ูููุฐ ุงูุญุฐู ุฏุงุฎู `TRANSACTION`.
- **@@ROWCOUNT** ุชููุฏู ููุนุฑูุฉ ูู ุตู ุงุชุฃุซุฑ ููุฑูุง ุจุนุฏ ุงูุฃูุฑ.
- **ุชุฐูุฑ ุฃู ุงูุชุบููุฑุงุช ุบูุฑ ุงูููููุฐุฉ ุจู `COMMIT` ุนุงุฏุฉู ุบูุฑ ูุฑุฆูุฉ ููุฌูุณุงุช ุงูุฃุฎุฑู (ุงุนุชูุงุฏูุง ุนูู isolation level)** โ ููู ูุง ุชุนุชูุฏ ุนูู ุฐูู ููุฃูุงูุ ุฏุง ููู DB engine.
- **ุงุณุชุฎุฏุงู ุงูุฏูุงู ูู WHERE (ูุซู MONTH(BirthDate)=5)** ูููุน ุงุณุชุฎุฏุงู ุงูููุงุฑุณ ุนูู `BirthDate` ุนุงุฏุฉู โ ูู ุงูุฌุฏูู ูุจูุฑ ุงูุฃุฏุงุก ูููู ูุชุฃุซุฑ. ุญููู: ุนููุฏ ูุญุณูุจ (computed column) ูููุฑูุณ ุฃู ุงุณุชุฎุฏุงู ูุทุงูุงุช ุชูุงุฑูุฎ ูู ููุงุณุจ.
- **ููุฏุงู ุงูุงุชุตุงู ูุจู `COMMIT`**: ุฅุฐุง ุงููุทุนุช ุงูุฌูุณุฉุ ุบุงูุจูุง ุณูููุชุฑุถ rollback ุชููุงุฆููุง (ูุนุชูุฏ ุนูู ูุธุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช).
- ุงุญุฐุฑ ูู ุญุฐู ุจูุงูุงุช ูููุฉ โ ุฏุงุฆูุงู ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฅู ุฃููู ูุจู ุชุบููุฑุงุช ูุจูุฑุฉ.
    

---

## ุชูุงุฑูู ุณุฑูุนุฉ 

1. ุงุนุฑุถ ุงูุตููู ุงูุชู ุณุชูุณุญ ูุจู ุชูููุฐ `DELETE` ุนูู ููุธููู ููููุฏูู ูู ุดูุฑ ููููู.  
    **ุงูุญู:** `SELECT * FROM Employees WHERE MONTH(BirthDate)=6;`
2. ูููุฐ ุญุฐููุง ุชุฌุฑูุจููุง ุฏุงุฎู ูุนุงููุฉ ุซู ุงุฑุฌุน ุงูุชุบููุฑุงุช: ุงูุชุจ ุฎุทูุงุช `BEGIN TRANSACTION`, `DELETE`, `SELECT @@ROWCOUNT`, `ROLLBACK`.
3. ุงุณุชุฎุฏู `DELETE ... OUTPUT deleted.*` ูุฎุฒู ุงููุชูุฌุฉ ูู ุฌุฏูู ูุคูุช ุซู ุฑุงุฌุนูุง.
    

---


##  -----------------  **2 โ ุฃูุงูุฑ SELECT ูุน ุดุฑูุท ูุชูุฏูุฉ**  -------------

#### **1) ุงุณุชุฎุฏุงู WHERE ูุน ุงูุฏูุงู (MONTH, DAY)**

#### ุงูููุฑุฉ

ุฃุญูุงููุง ูุด ุจูุญุชุงุฌ ููุงุฑู ุงูุชุงุฑูุฎ ูุงูู (ุงูููู + ุงูุดูุฑ + ุงูุณูุฉ)ุ ููู ูุญุชุงุฌ ููุงุฑู ุฌุฒุก ูููุ ุฒู ุงูุดูุฑ ุจุณ ุฃู ุงูููู ุจุณ.  
ูู ุงูุญุงูุฉ ุฏูุ SQL Server ุจูููุฑ ุฏูุงู ุฒู:
- **MONTH(date_column)** โ ุจุชุฑุฌุน ุฑูู ุงูุดูุฑ ูู ุงูุชุงุฑูุฎ.
- **DAY(date_column)** โ ุจุชุฑุฌุน ุฑูู ุงูููู ูู ุงูุชุงุฑูุฎ.
    

#### ุงูุตูุบุฉ:
```sql
SELECT * 
FROM table_name
WHERE MONTH(date_column) = ุฑูู_ุงูุดูุฑ;

SELECT * 
FROM table_name
WHERE DAY(date_column) = ุฑูู_ุงูููู;
```

#### ูุซุงู ุนููู:
```sql
SELECT * 
FROM Employees 
WHERE MONTH(BirthDate) = 5; -- ูู ุงููู ุงุชููุฏูุง ูู ุดูุฑ 5 (ูุงูู)

SELECT * 
FROM Employees 
WHERE DAY(BirthDate) = 21; -- ูู ุงููู ุนูุฏ ูููุงุฏูู ููู 21 ูู ุฃู ุดูุฑ
```

๐ก **ูุงูุฏุชูุง**: ูููุฏุฉ ูู ุนุงูุฒ ุชุนูู ููุชุฑุฉ ุนูู ุงูุชูุงุฑูุฎ ูู ุบูุฑ ูุง ุชูุชู ุจุงูุณูุฉ.

---

### **2) ุดุฑุท NOT IN ูุงุณุชุจุนุงุฏ ููู ูุนููุฉ**

#### ุงูููุฑุฉ

ุฃุญูุงููุง ุนุงูุฒ ุชุฌูุจ ุจูุงูุงุชุ ููู ุชุณุชุจุนุฏ ุดููุฉ ููู ูุญุฏุฏุฉ.  
ููุง ุจูุฌู ุฏูุฑ **NOT IN**ุ ุงููู ูุนูุงูุง "ุงููููุฉ ูุด ุถูู ุงููุงุฆูุฉ".

#### ุงูุตูุบุฉ:

```sql
SELECT ุนููุฏ1, ุนููุฏ2
FROM table_name
WHERE column_name NOT IN (ูููุฉ1, ูููุฉ2, ูููุฉ3);
```

#### ูุซุงู ุนููู:

```sql
SELECT St_Fname, St_Address
FROM Student 
WHERE St_Address NOT IN ('alex', 'cairo', 'tanta');
```

๐ ุงููุชูุฌุฉ: ูุชุธูุฑ ุฃุณูุงุก ูุนูุงููู ุงูุทูุงุจ ุงููู **ูุด** ุณุงูููู ูู ุงูุฅุณููุฏุฑูุฉ ุฃู ุงููุงูุฑุฉ ุฃู ุทูุทุง.

๐ก **ูุงูุฏุชูุง**: ุจุฏู ูุง ุชูุชุจ ุดุฑุท ุทููู ุจู `<>` ุฃูุชุฑ ูู ูุฑุฉุ ุจุชูุชุจูู ูุฑุฉ ูุงุญุฏุฉ ูู **NOT IN**.

---

# ูุฑุงุฌุนู ุนูู (Joins ุงูุฃุณุงุณูุฉุ Self Joinุ DML ูุน Joins)**

## ** โ ุฃููุงุน ุงูู Joins**

**INNER JOIN:** ูุฑุฌุน ุงูุตููู ุงููู ููุง ุชุทุงุจู ูู ุงูุฌุฏูููู.

```sql
SELECT s.St_Fname, d.Dept_Name
FROM Student s
INNER JOIN Department d ON d.Dept_Id = s.Dept_Id;
```

ูุซุงู ูุน ููุชุฑุฉ:

```sql
SELECT std.St_Fname, crs.Crs_Name, stdcrs.Grade
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
JOIN Course crs ON crs.Crs_Id = stdcrs.Crs_Id
WHERE stdcrs.Grade > 100;
```

**LEFT JOIN:** ูู ุตููู ุงูุฌุฏูู ุงูุฃูุณุฑ + ุชุทุงุจู ุงููููู ุฃู NULL.

```sql
SELECT s.St_Fname, d.Dept_Name
FROM Department d
LEFT JOIN Student s ON d.Dept_Id = s.Dept_Id;
```

**RIGHT JOIN:** ูู ุตููู ุงูุฌุฏูู ุงููููู + ุชุทุงุจู ุงููุณุงุฑ ุฃู NULL.

```sql
SELECT s.St_Fname, d.Dept_Name
FROM Student s
RIGHT JOIN Department d ON d.Dept_Id = s.Dept_Id;
```

> ููุชุฑุฉ ุจุนุฏ OUTER JOIN: ุถุน ุงูุดุฑุท ุฏุงุฎู `ON` ููุญูุงุธ ุนูู ุงูุตููู ุงููุงุฑุบุฉ.

**ุฏูุฌ ุฃูุซุฑ ูู ุฌุฏูู:**

```sql
SELECT std.St_Fname, crs.Crs_Name
FROM Student std
JOIN Stud_Course sc ON std.St_Id = sc.St_Id
JOIN Course crs ON crs.Crs_Id = sc.Crs_Id;
```

---

## **ุงูุฌุฒุก 4 โ Self Join**

**INNER SELF JOIN:** ููุท ุงููู ููู ูุดุฑู:

```sql
SELECT stud.St_Id, stud.St_Fname, mgr.St_Fname AS ManagerName
FROM Student stud
JOIN Student mgr ON mgr.St_Id = stud.St_super;
```

**LEFT SELF JOIN:** ูู ุงูุทูุงุจ ุญุชู ุจุฏูู ูุดุฑู:

```sql
SELECT stud.St_Id, stud.St_Fname, mgr.St_Fname AS ManagerName
FROM Student stud
LEFT JOIN Student mgr ON mgr.St_Id = stud.St_super;
```

---


## ุงูุฌุฒุก 5 โ DML ูุน Joins (SELECT/UPDATE/DELETE ูุน ุงูุฑุจุท)


- **DML** = ุฃูุงูุฑ ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช:
    - `SELECT` (ุนุฑุถ)
    - `UPDATE` (ุชุนุฏูู)
    - `DELETE` (ุญุฐู)

    
- **ุงูููุฑุฉ**: ุฃุชุนุงูู ูุน ุฃูุชุฑ ูู ุฌุฏูู ูู ููุณ ุงูููุช ุจุฏู ูุง ุฃุดุชุบู ุนูู ูู ุฌุฏูู ููุญุฏู.
    1. ุนุฑุถ ุจูุงูุงุช ูุฑุชุจุทุฉ ูู ุฌุฏุงูู ูุฎุชููุฉ.
    2. ุชุนุฏูู ุจูุงูุงุช ูู ุฌุฏูู ุจูุงุกู ุนูู ุดุฑูุท ูู ุฌุฏูู ุขุฎุฑ.
    3. ุญุฐู ุจูุงูุงุช ูู ุฌุฏูู ุจูุงุกู ุนูู ุดุฑูุท ูู ุฌุฏูู ุขุฎุฑ.
    4. ุชูููุฐ ุนูููุงุช ุนูู ุฌุฏุงูู ูุฑุชุจุทุฉ ูุนูุง ูู ุฃูุฑ ูุงุญุฏ.


### 1) `SELECT` ุจุงุณุชุฎุฏุงู JOIN (ุนุฑุถ ุจูุงูุงุช ุนูู ุฃุณุงุณ ุนูุงูุฉ)

**ูุซุงู:** ุนุฑุถ ุทูุงุจ + ููุฑุณุงุชูู ูุฏุฑุฌุงุชูู:

```sql
SELECT std.St_Fname, crs.Crs_Name, stdcrs.Grade
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
JOIN Course crs         ON crs.Crs_Id = stdcrs.Crs_Id
WHERE std.St_Address = 'cairo';
```

> ูุนุฑุถ ููุท ุทูุงุจ ูู ุงููุงูุฑุฉ ูุน ุงุณู ุงููุงุฏุฉ ูุฏุฑุฌุชูู.

---

### 2) `UPDATE` ุจุงุณุชุฎุฏุงู JOIN (ุชุนุฏูู ุจูุงูุงุช ุงุนุชูุงุฏูุง ุนูู ุฌุฏูู ุขุฎุฑ)

**ููุงุนุฏ:** ุงูุตูุบุฉ ุงูุดุงุฆุนุฉ ูู SQL Server:

```sql
UPDATE targetAlias
SET targetAlias.Column = <new value>
FROM TargetTable targetAlias
JOIN OtherTable o ON ...
WHERE ...;
```

**ูุซุงู ุนููู:** ุฅููุงุต ุงูุฏุฑุฌุฉ ูุฌููุน ุทูุงุจ ูู `cairo` ุจููุฏุงุฑ 10 ููุงุท:

```sql
UPDATE stdcrs
SET stdcrs.Grade = stdcrs.Grade - 10
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
WHERE std.St_Address = 'cairo';
```

> **ููุงุญุธุฉ:** ุชุฌูุจ ุงุณุชุฎุฏุงู ุงุฎุชุตุงุฑุงุช ุบูุฑ ูุงุถุญุฉ ูุซู `SET Grade -= 10` ูุฃููุง ูุฏ ูุง ุชููู ูุฏุนููุฉ ูู ูู ุจูุฆุฉ. ุงุชุจุน `SET Col = Col - 10`.

**ููุทุฉ ุฃูุงู:** ููููุฐ SELECT ููุงุซู ุฃููุงู ูุชุชุฃูุฏ ูู ุงูุตููู ุงููุชุฃุซุฑุฉ:

```sql
SELECT stdcrs.*
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
WHERE std.St_Address = 'cairo';
```

---

### 3) `DELETE` ุจุงุณุชุฎุฏุงู JOIN (ุญุฐู ุจูุงุกู ุนูู ุนูุงูุฉ)

ูู SQL Server ููููู ุญุฐู ูู ุฌุฏูู ูุญุฏุฏ ุจุงุณุชุฎุฏุงู JOIN. ุดูู ุนุงู:

```sql
DELETE tAlias
FROM TargetTable tAlias
JOIN OtherTable o ON ...
WHERE ...;
```

**ุฃ) ุญุฐู ุงูููุฑุณุงุช ูุทูุงุจ ุจุนูุฑ 28:**

```sql
DELETE stdcrs
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
WHERE std.St_Age = 28;
```

> ูุฐุง ูุญุฐู ุณุฌูุงุช `Stud_Course` ุงููุฑุชุจุทุฉ ุจุทูุงุจ ุนูุฑูู 28.

**ุจ) ุญุฐู ุงูุทูุงุจ ูููุฑุณุงุชูู (ุญุฐุฑ! ุงูุชุฑุชูุจ ููู ุนูุฏ ูุฌูุฏ FK):**  
ุฅุฐุง ููุฌุฏ ุนูุงูุฉ ููุชุงุญูุฉ (FK) ุชููุน ุญุฐู ุงูุทุงูุจ ูุจู ุญุฐู ุงูููุฑุณุงุชุ ูุฌุจ ุญุฐู ุงูููุฑุณุงุช ุฃููุงู ุซู ุญุฐู ุงูุทูุงุจ ุฏุงุฎู ูุนุงููุฉ:

```sql
BEGIN TRANSACTION;

-- 1) ุญุฐู ููุฑุณุงุช ุงูุทูุงุจ ุฐูู ุงูุนูุฑ 28
DELETE stdcrs
FROM Student std
JOIN Stud_Course stdcrs ON std.St_Id = stdcrs.St_Id
WHERE std.St_Age = 28;

-- 2) ุญุฐู ุงูุทูุงุจ ุฃููุณูู
DELETE std
FROM Student std
WHERE std.St_Age = 28;

COMMIT;
```

> ุฃู ุฅุฐุง ุงูู FK ูุนุฑู ุจู `ON DELETE CASCADE`ุ ุญุฐู ุงูุทุงูุจ ุณูุญุฐู ููุฑุณุงุชู ุขูููุง.

---

## ุชูุงุฑูู ูููุฑุงุฌุนุฉ 

1. ุงูุชุจ ุงุณุชุนูุงููุง ูุฌูุจ ูู ุงูุฃูุณุงู ุงูุชู ููุณ ููุง ุทูุงุจ.
2. ุงูุชุจ ุงุณุชุนูุงููุง ูุนุฑุถ ุฃุณูุงุก ุงูุทูุงุจ ุงูุฐูู ุฏุฑุฌุงุชูู > 90 ูู ูุงุฏุฉ "Math".
3. ูููุฐ UPDATE ูุฑูุน ุงูุฏุฑุฌุฉ 5 ููุงุท ููู ุทูุงุจ ุงูุฅุณููุฏุฑูุฉุ ูุน ุงูุชุฃูุฏ ุจุนุฏุฏ ุงูุตููู ุงููุชุฃุซุฑุฉ.
4. ุงุญุฐู ุทูุงุจูุง (ูุนูู ุงูุชุฑุงุถ ุนุฏู ูุฌูุฏ cascade) ููู ููุณ ูุฏููู ุฃู ููุฑุณุงุช โ ุฎุทูุงุช: ุฃุธูุฑ ุฃููุงูุ ุซู ุงุญุฐู.
